<!DOCTYPE html>
<html lang="vi">
  <head>
    <title>Nh√† h√†ng | Resort Deluxe</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,500,600,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,400i,700,700i" rel="stylesheet">

    <link rel="stylesheet" href="css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="css/animate.css">
    
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <link rel="stylesheet" href="css/magnific-popup.css">

    <link rel="stylesheet" href="css/aos.css">

    <link rel="stylesheet" href="css/ionicons.min.css">

    <link rel="stylesheet" href="css/bootstrap-datepicker.css">

    
    <link rel="stylesheet" href="css/flaticon.css">
    <link rel="stylesheet" href="css/icomoon.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="/css/tokens.css">
  <link rel="stylesheet" href="/css/globals.css">
  <link rel="stylesheet" href="/css/grid.css">
  <link rel="stylesheet" href="/css/components/navbar.css">
    
    <!-- Navbar Auth Styles -->
    <link rel="stylesheet" href="css/navbar-auth.css">
  
  <!-- Local typography tune-up for Vietnamese -->
  <style>
    /* Modern Hero Section - Same as rooms.html */
    .rooms-hero {
      background-image: url('images/bg_1.jpg');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      background-repeat: no-repeat;
      padding: 140px 0 100px;
      color: #fff;
      text-align: center;
      position: relative;
      overflow: hidden;
      margin-bottom: 60px;
      min-height: 500px;
      display: flex;
      align-items: center;
    }
    .rooms-hero::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: linear-gradient(135deg, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.5) 100%);
      z-index: 0;
    }
    .rooms-hero::after {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><defs><pattern id="grid" width="50" height="50" patternUnits="userSpaceOnUse"><path d="M 50 0 L 0 0 0 50" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
      opacity: 0.3;
      z-index: 1;
    }
    .rooms-hero-content {
      position: relative;
      z-index: 2;
      animation: slideUp 0.8s ease;
      width: 100%;
    }
    .rooms-hero h1 {
      font-size: 48px;
      font-weight: 700;
      margin-bottom: 20px;
      color: #ffffff !important;
      text-shadow: 0 2px 10px rgba(0,0,0,0.3);
      animation: fadeInDown 1s ease;
    }
    .rooms-hero p {
      font-size: 20px;
      color: #ffffff !important;
      opacity: 0.95;
      text-shadow: 0 2px 8px rgba(0,0,0,0.2);
      animation: fadeInUp 1.2s ease;
    }
    
    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(50px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @media (max-width: 768px) {
      .rooms-hero {
        padding: 100px 0 60px;
        margin-bottom: 40px;
        background-attachment: scroll;
        min-height: 400px;
      }
      .rooms-hero h1 {
        font-size: 36px;
      }
    }
    
    /* Headings: r√µ r√†ng, kh√¥ng vi·∫øt hoa to√†n b·ªô, kho·∫£ng c√°ch d·ªÖ ƒë·ªçc */
    h1, h2, h3 { 
      font-family: var(--font-heading, 'Poppins', sans-serif);
      letter-spacing: 0;
      text-transform: none;
    }
    .bread { font-weight: 600; }
    .heading-section .subheading { 
      color: var(--color-primary-dark, #B89968);
      font-weight: 600;
    }
    .heading-section h2 { 
      line-height: var(--lh-snug, 1.35);
      margin-bottom: var(--space-16, 16px);
    }
    /* N·ªôi dung m√¥ t·∫£ d√πng m√†u trung t√≠nh */
    .wrap-about p, .desc p { 
      color: var(--color-muted, #6B7280);
      line-height: var(--lh-normal, 1.6);
    }
    /* M·ª•c m√≥n ƒÉn: nh·∫•n m·∫°nh t√™n v√† gi√° */
    .pricing-entry .text h3 span { 
      font-weight: 600;
    }
    .pricing-entry .price { 
      color: var(--color-primary-main, #C8A97E);
      font-weight: 700;
    }
    
    /* Modern Restaurant Page Styles */
    /* Modern Filter Section - Vertical Sidebar */
    .filter-section-modern {
      background: #fff;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      position: sticky;
      top: 100px;
      height: fit-content;
      max-height: calc(100vh - 120px);
      overflow-y: auto;
      border: 1px solid #e5e7eb;
    }
    
    .filter-header {
      margin-bottom: 24px;
      padding-bottom: 20px;
      border-bottom: 2px solid #f0f0f0;
    }
    
    .filter-header h3 {
      font-size: 22px;
      font-weight: 700;
      color: #1a1a1a;
      margin: 0;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .filter-grid {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    
    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    
    .filter-group label {
      font-weight: 600;
      color: #374151;
      font-size: 14px;
      margin-bottom: 0;
    }
    
    .filter-group .form-control,
    .filter-group .form-select {
      padding: 10px 15px;
      border-radius: 10px;
      border: 2px solid #e5e7eb;
      font-size: 14px;
      transition: all 0.3s ease;
      background: #fff;
    }
    
    .filter-group .form-control:focus,
    .filter-group .form-select:focus {
      outline: none;
      border-color: #c8a97e;
      box-shadow: 0 0 0 3px rgba(200,169,126,0.1);
    }
    
    .search-box {
      position: relative;
    }
    
    .search-box i {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: #6b7280;
      font-size: 16px;
      z-index: 2;
    }
    
    .search-box input {
      padding-left: 40px;
      border-radius: 10px;
      border: 2px solid #e5e7eb;
      transition: all 0.3s ease;
      width: 100%;
    }
    
    .search-box input:focus {
      border-color: #c8a97e;
      box-shadow: 0 0 0 3px rgba(200,169,126,0.1);
      outline: none;
    }
    
    .results-header {
      margin-bottom: 25px;
    }
    
    .results-header h3 {
      font-size: 24px;
      font-weight: 700;
      color: #1a1a1a;
      margin: 0;
    }
    
    @media (max-width: 991px) {
      .filter-section-modern {
        position: relative;
        top: 0;
        margin-bottom: 30px;
        max-height: none;
      }
    }
    
    /* Features Section - Ensure visibility */
    .ftco-section.bg-light {
      display: block !important;
      visibility: visible !important;
      opacity: 1 !important;
      padding: 80px 0 !important;
    }
    
    .ftco-section.bg-light .container {
      display: block !important;
      visibility: visible !important;
      opacity: 1 !important;
    }
    
    .ftco-section.bg-light .row {
      display: flex !important;
      visibility: visible !important;
      opacity: 1 !important;
    }
    
    .ftco-section.bg-light .text-center {
      display: block !important;
      visibility: visible !important;
      opacity: 1 !important;
    }
    
    .ftco-section.bg-light h2,
    .ftco-section.bg-light h4,
    .ftco-section.bg-light p {
      display: block !important;
      visibility: visible !important;
      opacity: 1 !important;
      color: #1a1a1a !important;
    }
    
    .ftco-section.bg-light .subheading {
      display: inline-block !important;
      visibility: visible !important;
      opacity: 1 !important;
    }
    
    /* Features Section Hover Effects */
    .ftco-section.bg-light .text-center:hover {
      transform: translateY(-5px) !important;
      box-shadow: 0 8px 30px rgba(0,0,0,0.12) !important;
    }
    
    /* New Modern Menu Cards Design */
    .menu-card-new {
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) !important;
      position: relative;
      overflow: hidden;
    }
    
    .menu-card-new:hover {
      transform: translateY(-8px) !important;
      box-shadow: 0 12px 40px rgba(0,0,0,0.15) !important;
    }
    
    .menu-card-image-new {
      transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }
    
    .menu-card-new:hover .menu-card-image-new {
      transform: scale(1.1);
    }
    
    .menu-card-new:hover .menu-card-quick-view-new {
      transform: translate(-50%, -50%) scale(1) !important;
    }
    
    .menu-card-quick-view-new:hover {
      background: #C8A97E !important;
      color: #fff !important;
      transform: translate(-50%, -50%) scale(1.1) !important;
    }
    
    /* Pulse animation for cart badge */
    @keyframes pulse {
      0%, 100% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.15);
      }
    }
    
    @keyframes slideInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* Button hover effects */
    .btn-qty-new:active,
    .btn-add-to-cart-new:active {
      transform: translateY(0) !important;
    }
    
    /* Success notification animation */
    @keyframes bounceIn {
      0% {
        opacity: 0;
        transform: scale(0.3);
      }
      50% {
        opacity: 1;
        transform: scale(1.05);
      }
      70% {
        transform: scale(0.9);
      }
      100% {
        transform: scale(1);
      }
    }
    
    .menu-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(200,169,126,0.05) 0%, rgba(184,153,104,0.1) 100%);
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 0;
    }
    
    .menu-card:hover::before {
      opacity: 1;
    }
    
    .menu-card:hover {
      transform: translateY(-8px) scale(1.02) !important;
      box-shadow: 0 12px 30px rgba(0,0,0,0.15) !important;
    }
    
    .menu-card-image {
      transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }
    
    .menu-card:hover .menu-card-image {
      transform: scale(1.15);
    }
    
    /* Quick View Button */
    .menu-card-quick-view {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0);
      background: rgba(255,255,255,0.95);
      color: #c8a97e;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      z-index: 10;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }
    
    .menu-card:hover .menu-card-quick-view {
      transform: translate(-50%, -50%) scale(1);
    }
    
    .menu-card-quick-view:hover {
      background: #c8a97e;
      color: #fff;
      transform: translate(-50%, -50%) scale(1.1);
    }
    
    /* About Section Improvements */
    .ftco-section.ftc-no-pb.ftc-no-pt {
      padding: 80px 0;
    }
    
    .wrap-about {
      padding-left: 30px;
      padding-right: 30px;
    }
    
    /* Ensure text is visible */
    .wrap-about {
      display: block !important;
      visibility: visible !important;
      opacity: 1 !important;
    }
    
    .wrap-about .heading-section {
      display: block !important;
      visibility: visible !important;
      opacity: 1 !important;
    }
    
    .wrap-about .pb-md-4 {
      display: block !important;
      visibility: visible !important;
      opacity: 1 !important;
    }
    
    .wrap-about p {
      display: block !important;
      visibility: visible !important;
      opacity: 1 !important;
      color: #4b5563 !important;
    }
    
    .wrap-about .subheading {
      display: inline-block !important;
      visibility: visible !important;
      opacity: 1 !important;
      color: #c8a97e !important;
    }
    
    .wrap-about h2 {
      display: block !important;
      visibility: visible !important;
      opacity: 1 !important;
      color: #1a1a1a !important;
    }
    
    .wrap-about .ml-md-0 {
      display: block !important;
      visibility: visible !important;
      opacity: 1 !important;
    }
    
    .img.img-2.img-3 {
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 8px 24px rgba(0,0,0,0.12);
      transition: transform 0.3s ease;
      position: relative;
    }
    
    .img.img-2.img-3:hover {
      transform: scale(1.02);
    }
    
    .img.img-2.img-3 .overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 1;
    }
    
    @media (max-width: 768px) {
      .wrap-about {
        padding-left: 0;
        padding-right: 0;
        margin-top: 30px;
      }
      
      .img.img-2.img-3 {
        min-height: 300px !important;
      }
      
      .heading-section h2 {
        font-size: 28px !important;
      }
      
      .ftco-section.ftc-no-pb.ftc-no-pt {
        padding: 50px 0;
      }
    }
    
    /* FORCE GRID LAYOUT FOR RESTAURANT MENU */
    #restaurantMenuList {
      display: flex !important;
      flex-wrap: wrap !important;
      margin-left: -12px !important;
      margin-right: -12px !important;
    }
    #restaurantMenuList > [class*="col-"] {
      display: block !important;
      width: 100% !important;
      padding-left: 12px !important;
      padding-right: 12px !important;
      flex: 0 0 auto !important;
    }
    /* Small screens (‚â•576px): 2 columns */
    @media (min-width: 576px) {
      #restaurantMenuList > .col-sm-6 {
        width: 50% !important;
      }
    }
    /* Medium screens (‚â•768px): 2 columns */
    @media (min-width: 768px) {
      #restaurantMenuList > .col-md-6 {
        width: 50% !important;
      }
    }
    /* Large screens (‚â•992px): 3 columns */
    @media (min-width: 992px) {
      #restaurantMenuList > .col-lg-4 {
        width: 33.333333% !important;
      }
      #restaurantMenuList > .col-md-6 {
        width: 50% !important;
      }
    }
    /* Ensure menu cards don't stretch full width */
    #restaurantMenuList .menu-card {
      max-width: 100% !important;
      box-sizing: border-box !important;
    }
  </style>
  </head>
  <body>

    <!-- Header placeholder - will be loaded by load-header.js -->
    <div id="header-placeholder"></div>
    
    <!-- Load header component -->
    <script src="js/load-header.js"></script>

    <section class="rooms-hero">
      <div class="container">
        <div class="rooms-hero-content">
          <h1 style="color: #ffffff !important;">Nh√† h√†ng</h1>
          <p style="color: #ffffff !important;">ƒê·∫≥ng c·∫•p d·ªãch v·ª•, ƒë·∫≠m ƒë√† h∆∞∆°ng v·ªã</p>
        </div>
      </div>
    </section>
		
		<section class="ftco-section ftc-no-pb ftc-no-pt">
			<div class="container">
				<div class="row align-items-center">
					<div class="col-md-6 p-md-5 img img-2 img-3 d-flex justify-content-center align-items-center" style="background-image: url(images/bg_1.jpg); min-height: 450px; border-radius: 16px; background-size: cover; background-position: center; position: relative;">
						<div class="overlay" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(135deg, rgba(200,169,126,0.1) 0%, rgba(0,0,0,0.2) 100%); border-radius: 16px;"></div>
					</div>
					<div class="col-md-6 py-5 wrap-about pb-md-5 ftco-animate" style="display: block !important; visibility: visible !important; opacity: 1 !important; position: relative !important; z-index: 1 !important;">
	          <div class="heading-section heading-section-wo-line pt-md-4 mb-4" style="display: block !important; visibility: visible !important; opacity: 1 !important;">
	          	<div class="ml-md-0" style="display: block !important; visibility: visible !important; opacity: 1 !important;">
                  <span class="subheading" style="color: #c8a97e !important; font-weight: 600; font-size: 14px; text-transform: uppercase; letter-spacing: 2px; display: inline-block !important; visibility: visible !important; opacity: 1 !important;">Tr·∫£i nghi·ªám ·∫©m th·ª±c</span>
                    <h2 class="mb-3" style="font-size: 36px; font-weight: 700; color: #1a1a1a !important; line-height: 1.2; display: block !important; visibility: visible !important; opacity: 1 !important; margin-top: 10px;">ƒê·∫≥ng c·∫•p d·ªãch v·ª•, ƒë·∫≠m ƒë√† h∆∞∆°ng v·ªã</h2>
	            </div>
	          </div>
	          <div class="pb-md-4" style="display: block !important; visibility: visible !important; opacity: 1 !important;">
              <p style="font-size: 16px; line-height: 1.8; color: #4b5563 !important; margin-bottom: 20px; display: block !important; visibility: visible !important; opacity: 1 !important;">Kh√°m ph√° kh√¥ng gian ·∫©m th·ª±c cao c·∫•p v·ªõi th·ª±c ƒë∆°n phong ph√∫, ƒë∆∞·ª£c ch·∫ø bi·∫øn t·ª´ nh·ªØng nguy√™n li·ªáu t∆∞∆°i ngon nh·∫•t v√† c√¥ng th·ª©c ƒë·ªôc ƒë√°o. ƒê·ªôi ng≈© ƒë·∫ßu b·∫øp gi√†u kinh nghi·ªám c·ªßa ch√∫ng t√¥i lu√¥n t·∫≠n t√¢m t·∫°o ra nh·ªØng m√≥n ƒÉn ƒë·∫∑c s·∫Øc, k·∫øt h·ª£p gi·ªØa h∆∞∆°ng v·ªã truy·ªÅn th·ªëng v√† n√©t hi·ªán ƒë·∫°i.</p>
              <p style="font-size: 16px; line-height: 1.8; color: #4b5563 !important; margin-bottom: 20px; display: block !important; visibility: visible !important; opacity: 1 !important;">Cho d√π l√† b·ªØa s√°ng nh·∫π nh√†ng hay b·ªØa t·ªëi l√£ng m·∫°n, ch√∫ng t√¥i cam k·∫øt mang ƒë·∫øn nh·ªØng kho·∫£nh kh·∫Øc tuy·ªát v·ªùi cho th·ª±c kh√°ch. M·ªói m√≥n ƒÉn ƒë∆∞·ª£c chƒÉm ch√∫t t·ª´ng chi ti·∫øt, ƒë·∫£m b·∫£o ch·∫•t l∆∞·ª£ng v√† h∆∞∆°ng v·ªã ho√†n h·∫£o. Kh√¥ng gian ·∫•m c√∫ng, sang tr·ªçng s·∫Ω gi√∫p b·∫°n th∆∞ gi√£n v√† t·∫≠n h∆∞·ªüng tr·ªçn v·∫πn tr·∫£i nghi·ªám ·∫©m th·ª±c.</p>
              <p style="font-size: 16px; line-height: 1.8; color: #4b5563 !important; margin-bottom: 20px; display: block !important; visibility: visible !important; opacity: 1 !important;">Nh√† h√†ng v√† qu·∫ßy bar c·ªßa ch√∫ng t√¥i ph·ª•c v·ª• 24/7, lu√¥n s·∫µn s√†ng ƒë√°p ·ª©ng m·ªçi nhu c·∫ßu c·ªßa b·∫°n. T·ª´ nh·ªØng m√≥n ƒÉn ƒë·ªãa ph∆∞∆°ng ƒë·∫∑c s·∫Øc ƒë·∫øn c√°c m√≥n qu·ªëc t·∫ø ƒëa d·∫°ng, ch√∫ng t√¥i c√≥ th·ªÉ ph·ª•c v·ª• b·ªØa ƒÉn theo y√™u c·∫ßu ƒë·∫∑c bi·ªát ho·∫∑c t·ªï ch·ª©c c√°c s·ª± ki·ªán ri√™ng t∆∞.</p>
              <p style="font-size: 16px; line-height: 1.8; color: #4b5563 !important; margin-bottom: 0; display: block !important; visibility: visible !important; opacity: 1 !important;">ƒê·∫∑t b√†n tr∆∞·ªõc ho·∫∑c ƒë·∫∑t m√≥n mang v·ªÅ - ch√∫ng t√¥i s·∫Ω mang ƒë·∫øn cho b·∫°n d·ªãch v·ª• t·ªët nh·∫•t v·ªõi gi√° c·∫£ h·ª£p l√Ω v√† ch·∫•t l∆∞·ª£ng kh√¥ng ƒë·ªïi.</p>
						</div>
					</div>
				</div>
			</div>
		</section>

    <!-- Features Section -->
    <section class="ftco-section bg-light" style="padding: 80px 0; display: block !important; visibility: visible !important; opacity: 1 !important; background-color: #f8f9fa !important;">
      <div class="container" style="display: block !important; visibility: visible !important; opacity: 1 !important;">
        <div class="row justify-content-center mb-5" style="display: flex !important; visibility: visible !important; opacity: 1 !important;">
          <div class="col-md-7 heading-section text-center ftco-animate" style="display: block !important; visibility: visible !important; opacity: 1 !important;">
            <span class="subheading" style="color: #c8a97e !important; font-size: 14px; text-transform: uppercase; letter-spacing: 2px; display: inline-block !important; visibility: visible !important; opacity: 1 !important;">∆Øu ƒëi·ªÉm n·ªïi b·∫≠t</span>
            <h2 class="mb-4" style="font-size: 36px; font-weight: 700; color: #1a1a1a !important; display: block !important; visibility: visible !important; opacity: 1 !important; margin-top: 10px;">T·∫°i sao ch·ªçn nh√† h√†ng c·ªßa ch√∫ng t√¥i?</h2>
          </div>
        </div>
        <div class="row" style="display: flex !important; visibility: visible !important; opacity: 1 !important;">
          <div class="col-md-4 mb-4 ftco-animate" style="display: block !important; visibility: visible !important; opacity: 1 !important;">
            <div class="text-center p-4" style="background: #fff; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); height: 100%; transition: transform 0.3s ease; display: block !important; visibility: visible !important; opacity: 1 !important;">
              <div class="icon d-flex align-items-center justify-content-center mb-3" style="width: 70px; height: 70px; margin: 0 auto; background: linear-gradient(135deg, #c8a97e 0%, #b89968 100%); border-radius: 50%; display: flex !important; visibility: visible !important; opacity: 1 !important;">
                <span style="font-size: 36px; color: #fff; display: inline-block !important; visibility: visible !important; opacity: 1 !important;">üçΩÔ∏è</span>
              </div>
              <h4 class="mb-3" style="font-size: 20px; font-weight: 700; color: #1a1a1a !important; display: block !important; visibility: visible !important; opacity: 1 !important;">Nguy√™n li·ªáu t∆∞∆°i ngon</h4>
              <p style="font-size: 15px; line-height: 1.7; color: #6b7280 !important; display: block !important; visibility: visible !important; opacity: 1 !important;">Ch√∫ng t√¥i ch·ªçn l·ªçc k·ªπ c√†ng c√°c nguy√™n li·ªáu t∆∞∆°i ngon nh·∫•t t·ª´ c√°c nh√† cung c·∫•p uy t√≠n, ƒë·∫£m b·∫£o ch·∫•t l∆∞·ª£ng v√† an to√†n th·ª±c ph·∫©m cho m·ªói m√≥n ƒÉn.</p>
            </div>
          </div>
          <div class="col-md-4 mb-4 ftco-animate">
            <div class="text-center p-4" style="background: #fff; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); height: 100%; transition: transform 0.3s ease;">
              <div class="icon d-flex align-items-center justify-content-center mb-3" style="width: 70px; height: 70px; margin: 0 auto; background: linear-gradient(135deg, #c8a97e 0%, #b89968 100%); border-radius: 50%;">
                <span style="font-size: 36px; color: #fff;">üë®‚Äçüç≥</span>
              </div>
              <h4 class="mb-3" style="font-size: 20px; font-weight: 700; color: #1a1a1a;">ƒê·∫ßu b·∫øp chuy√™n nghi·ªáp</h4>
              <p style="font-size: 15px; line-height: 1.7; color: #6b7280;">ƒê·ªôi ng≈© ƒë·∫ßu b·∫øp gi√†u kinh nghi·ªám v·ªõi nhi·ªÅu nƒÉm trong ngh·ªÅ, lu√¥n t·∫≠n t√¢m t·∫°o ra nh·ªØng m√≥n ƒÉn ngon mi·ªáng v√† ƒë·∫πp m·∫Øt.</p>
            </div>
          </div>
          <div class="col-md-4 mb-4 ftco-animate">
            <div class="text-center p-4" style="background: #fff; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); height: 100%; transition: transform 0.3s ease;">
              <div class="icon d-flex align-items-center justify-content-center mb-3" style="width: 70px; height: 70px; margin: 0 auto; background: linear-gradient(135deg, #c8a97e 0%, #b89968 100%); border-radius: 50%;">
                <span style="font-size: 36px; color: #fff;">‚è∞</span>
              </div>
              <h4 class="mb-3" style="font-size: 20px; font-weight: 700; color: #1a1a1a;">Ph·ª•c v·ª• 24/7</h4>
              <p style="font-size: 15px; line-height: 1.7; color: #6b7280;">Nh√† h√†ng m·ªü c·ª≠a 24/7, s·∫µn s√†ng ph·ª•c v·ª• b·∫°n b·∫•t c·ª© l√∫c n√†o. T·ª´ b·ªØa s√°ng s·ªõm ƒë·∫øn b·ªØa ƒë√™m mu·ªôn, ch√∫ng t√¥i lu√¥n c√≥ m·∫∑t.</p>
            </div>
          </div>
        </div>
        <div class="row mt-4">
          <div class="col-md-4 mb-4 ftco-animate">
            <div class="text-center p-4" style="background: #fff; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); height: 100%; transition: transform 0.3s ease;">
              <div class="icon d-flex align-items-center justify-content-center mb-3" style="width: 70px; height: 70px; margin: 0 auto; background: linear-gradient(135deg, #c8a97e 0%, #b89968 100%); border-radius: 50%;">
                <span style="font-size: 36px; color: #fff;">üéâ</span>
              </div>
              <h4 class="mb-3" style="font-size: 20px; font-weight: 700; color: #1a1a1a;">S·ª± ki·ªán ƒë·∫∑c bi·ªát</h4>
              <p style="font-size: 15px; line-height: 1.7; color: #6b7280;">T·ªï ch·ª©c c√°c s·ª± ki·ªán nh∆∞ ti·ªác sinh nh·∫≠t, k·ª∑ ni·ªám, h·ªôi ngh·ªã v·ªõi th·ª±c ƒë∆°n t√πy ch·ªânh v√† kh√¥ng gian sang tr·ªçng ph√π h·ª£p.</p>
            </div>
          </div>
          <div class="col-md-4 mb-4 ftco-animate">
            <div class="text-center p-4" style="background: #fff; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); height: 100%; transition: transform 0.3s ease;">
              <div class="icon d-flex align-items-center justify-content-center mb-3" style="width: 70px; height: 70px; margin: 0 auto; background: linear-gradient(135deg, #c8a97e 0%, #b89968 100%); border-radius: 50%;">
                <span style="font-size: 36px; color: #fff;">üöö</span>
              </div>
              <h4 class="mb-3" style="font-size: 20px; font-weight: 700; color: #1a1a1a;">Giao h√†ng t·∫≠n n∆°i</h4>
              <p style="font-size: 15px; line-height: 1.7; color: #6b7280;">D·ªãch v·ª• giao h√†ng t·∫≠n n∆°i nhanh ch√≥ng, ƒë·∫£m b·∫£o m√≥n ƒÉn c√≤n n√≥ng h·ªïi v√† th∆°m ngon khi ƒë·∫øn tay kh√°ch h√†ng.</p>
            </div>
          </div>
          <div class="col-md-4 mb-4 ftco-animate">
            <div class="text-center p-4" style="background: #fff; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); height: 100%; transition: transform 0.3s ease;">
              <div class="icon d-flex align-items-center justify-content-center mb-3" style="width: 70px; height: 70px; margin: 0 auto; background: linear-gradient(135deg, #c8a97e 0%, #b89968 100%); border-radius: 50%;">
                <span style="font-size: 36px; color: #fff;">üí≥</span>
              </div>
              <h4 class="mb-3" style="font-size: 20px; font-weight: 700; color: #1a1a1a;">Thanh to√°n linh ho·∫°t</h4>
              <p style="font-size: 15px; line-height: 1.7; color: #6b7280;">Ch·∫•p nh·∫≠n nhi·ªÅu h√¨nh th·ª©c thanh to√°n: ti·ªÅn m·∫∑t, th·∫ª, chuy·ªÉn kho·∫£n. Quy tr√¨nh thanh to√°n nhanh ch√≥ng v√† an to√†n.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

		<section class="ftco-section" style="padding: 60px 0;">
			<div class="container">
				<div class="row justify-content-center mb-5 pb-3">
          <div class="col-md-10 heading-section text-center ftco-animate">
            <span class="subheading" style="color: #c8a97e; font-size: 14px; text-transform: uppercase; letter-spacing: 2px;">Kh√°m ph√° th·ª±c ƒë∆°n</span>
            <h2 class="mb-3" style="font-size: 36px; font-weight: 700; color: #1a1a1a;">Th·ª±c ƒê∆°n ƒêa D·∫°ng</h2>
            <p class="text-muted" style="font-size: 16px; line-height: 1.8; max-width: 700px; margin: 0 auto;">Tr·∫£i nghi·ªám h∆∞∆°ng v·ªã ƒë·∫∑c bi·ªát v·ªõi nh·ªØng m√≥n ƒÉn ƒë∆∞·ª£c ch·∫ø bi·∫øn tinh t·∫ø t·ª´ nguy√™n li·ªáu t∆∞∆°i ngon nh·∫•t, mang ƒë·∫øn cho b·∫°n nh·ªØng b·ªØa ƒÉn ƒë√°ng nh·ªõ.</p>
          </div>
        </div>
        
        <div class="row">
          <!-- Main Content - Menu Items -->
          <div class="col-lg-9 col-md-8">
            <!-- Results Header -->
            <div class="results-header mb-4" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
              <div>
                <h3 style="font-size: 24px; font-weight: 700; color: #1a1a1a; margin: 0;">T·∫•t c·∫£ m√≥n ƒÉn</h3>
                <p id="menuResultsCount" style="color: #6b7280; font-size: 14px; margin: 5px 0 0 0;">ƒêang t·∫£i...</p>
              </div>
            </div>
            
            <!-- Menu Items Grid -->
            <div id="restaurantMenuList" style="display: flex; flex-wrap: wrap; margin-left: -12px; margin-right: -12px;">
              <!-- Menu items will be loaded dynamically from API -->
              <div class="col-12 text-center py-5" style="width: 100%; padding-left: 12px; padding-right: 12px;">
                <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
                  <span class="sr-only">ƒêang t·∫£i menu...</span>
                </div>
                <p class="mt-3 text-muted">ƒêang t·∫£i th·ª±c ƒë∆°n t·ª´ h·ªá th·ªëng...</p>
              </div>
            </div>
          </div>
          
          <!-- Sidebar - Filters -->
          <div class="col-lg-3 col-md-4">
            <div class="filter-section-modern">
              <div class="filter-header">
                <h3>B·ªô l·ªçc</h3>
              </div>
              
              <div class="filter-grid">
                <!-- Search -->
                <div class="filter-group">
                  <label for="menuSearch">üîç T√¨m ki·∫øm</label>
                  <div class="search-box">
                    <i class="icon-search" style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: #6b7280; z-index: 2;"></i>
                    <input type="text" id="menuSearch" class="form-control" placeholder="T√™n m√≥n ƒÉn..." style="padding-left: 40px;">
                  </div>
                </div>
                
                <!-- Category Filter -->
                <div class="filter-group">
                  <label for="menuCategory">üìÇ Danh m·ª•c</label>
                  <select id="menuCategory" class="form-select">
                    <option value="">T·∫•t c·∫£ danh m·ª•c</option>
                    <option value="appetizer">üç§ Khai v·ªã</option>
                    <option value="main">üçΩÔ∏è M√≥n ch√≠nh</option>
                    <option value="dessert">üç∞ Tr√°ng mi·ªáng</option>
                    <option value="drink">ü•§ ƒê·ªì u·ªëng</option>
                  </select>
                </div>
                
                <!-- Sort -->
                <div class="filter-group">
                  <label for="menuSort">üìä S·∫Øp x·∫øp</label>
                  <select id="menuSort" class="form-select">
                    <option value="default">M·∫∑c ƒë·ªãnh</option>
                    <option value="price-asc">Gi√°: Th·∫•p ‚Üí Cao</option>
                    <option value="price-desc">Gi√°: Cao ‚Üí Th·∫•p</option>
                    <option value="name-asc">T√™n: A ‚Üí Z</option>
                    <option value="name-desc">T√™n: Z ‚Üí A</option>
                    <option value="popular">Ph·ªï bi·∫øn nh·∫•t</option>
                  </select>
                </div>
                
                <!-- Reset Button -->
                <div class="filter-group">
                  <button id="resetFilters" class="btn btn-outline-secondary w-100" style="margin-top: 10px;">
                    <i class="icon-refresh"></i> ƒê·∫∑t l·∫°i
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Shopping Cart Floating Button -->
        <div id="cartFloatingBtn" style="position: fixed; bottom: 30px; right: 30px; z-index: 1000; display: none;">
          <button type="button" class="btn btn-primary btn-lg rounded-circle shadow-lg" style="width: 60px; height: 60px; position: relative;" onclick="showCartModal()">
            <i class="icon-shopping-cart" style="font-size: 24px;"></i>
            <span id="cartBadge" class="badge bg-danger position-absolute top-0 start-100 translate-middle" style="display: none;">0</span>
          </button>
        </div>
			</div>
		</section>

    <!-- Reservation/Contact Section -->
    <section class="ftco-section" style="padding: 80px 0; background: linear-gradient(135deg, rgba(200,169,126,0.05) 0%, rgba(184,153,104,0.1) 100%);">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-md-6 mb-4 mb-md-0">
            <div class="heading-section">
              <span class="subheading" style="color: #c8a97e; font-size: 14px; text-transform: uppercase; letter-spacing: 2px; display: block; margin-bottom: 10px;">ƒê·∫∑t b√†n ngay</span>
              <h2 class="mb-4" style="font-size: 36px; font-weight: 700; color: #1a1a1a; line-height: 1.2;">B·∫°n c√≥ c√¢u h·ªèi ho·∫∑c mu·ªën ƒë·∫∑t b√†n?</h2>
              <p style="font-size: 16px; line-height: 1.8; color: #6b7280; margin-bottom: 25px;">Li√™n h·ªá v·ªõi ch√∫ng t√¥i ngay h√¥m nay ƒë·ªÉ ƒë∆∞·ª£c t∆∞ v·∫•n v√† ƒë·∫∑t b√†n. ƒê·ªôi ng≈© nh√¢n vi√™n th√¢n thi·ªán c·ªßa ch√∫ng t√¥i lu√¥n s·∫µn s√†ng ph·ª•c v·ª• b·∫°n.</p>
              <div class="mb-4">
                <div style="display: flex; align-items: center; margin-bottom: 15px;">
                  <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #c8a97e 0%, #b89968 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                    <span style="font-size: 24px; color: #fff;">üìû</span>
                  </div>
                  <div>
                    <strong style="color: #1a1a1a; font-size: 16px;">Hotline</strong>
                    <p style="color: #6b7280; margin: 0; font-size: 15px;">+84 901 329 227</p>
                  </div>
                </div>
                <div style="display: flex; align-items: center; margin-bottom: 15px;">
                  <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #c8a97e 0%, #b89968 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                    <span style="font-size: 24px; color: #fff;">üìß</span>
                  </div>
                  <div>
                    <strong style="color: #1a1a1a; font-size: 16px;">Email</strong>
                    <p style="color: #6b7280; margin: 0; font-size: 15px;">restaurant@resortdeluxe.vn</p>
                  </div>
                </div>
                <div style="display: flex; align-items: center;">
                  <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #c8a97e 0%, #b89968 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                    <span style="font-size: 24px; color: #fff;">üìç</span>
                  </div>
                  <div>
                    <strong style="color: #1a1a1a; font-size: 16px;">ƒê·ªãa ch·ªâ</strong>
                    <p style="color: #6b7280; margin: 0; font-size: 15px;">123 ƒê∆∞·ªùng Bi·ªÉn Xanh, Th√†nh ph·ªë Bi·ªÉn, Vi·ªát Nam</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div style="background: #fff; padding: 40px; border-radius: 20px; box-shadow: 0 8px 30px rgba(0,0,0,0.1);">
              <h3 style="font-size: 24px; font-weight: 700; color: #1a1a1a; margin-bottom: 25px;">G·ª≠i tin nh·∫Øn cho ch√∫ng t√¥i</h3>
              <form>
                <div class="mb-3">
                  <input type="text" class="form-control" placeholder="H·ªç v√† t√™n" style="padding: 12px 15px; border-radius: 10px; border: 2px solid #e5e7eb; font-size: 15px;">
                </div>
                <div class="mb-3">
                  <input type="email" class="form-control" placeholder="Email c·ªßa b·∫°n" style="padding: 12px 15px; border-radius: 10px; border: 2px solid #e5e7eb; font-size: 15px;">
                </div>
                <div class="mb-3">
                  <input type="tel" class="form-control" placeholder="S·ªë ƒëi·ªán tho·∫°i" style="padding: 12px 15px; border-radius: 10px; border: 2px solid #e5e7eb; font-size: 15px;">
                </div>
                <div class="mb-3">
                  <textarea class="form-control" rows="4" placeholder="N·ªôi dung tin nh·∫Øn" style="padding: 12px 15px; border-radius: 10px; border: 2px solid #e5e7eb; font-size: 15px; resize: none;"></textarea>
                </div>
                <button type="submit" class="btn w-100" style="background: linear-gradient(135deg, #c8a97e 0%, #b89968 100%); color: #fff; padding: 14px; border-radius: 10px; font-size: 16px; font-weight: 600; border: none; transition: all 0.3s ease;">
                  G·ª≠i tin nh·∫Øn
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer class="ftco-footer ftco-bg-dark ftco-section" style="margin-top: 60px;">
      <div class="container">
        <div class="row mb-5">
          <div class="col-md">
            <div class="ftco-footer-widget mb-4">
              <h2 class="ftco-heading-2">RESORT DELUXE</h2>
              <p>Khu ngh·ªâ d∆∞·ª°ng cao c·∫•p v·ªõi ƒë·∫ßy ƒë·ªß ti·ªán nghi hi·ªán ƒë·∫°i, ph·ª•c v·ª• chu ƒë√°o v√† kh√¥ng gian tuy·ªát ƒë·∫πp.</p>
              <ul class="ftco-footer-social list-unstyled float-md-left float-lft mt-5">
                <li class="ftco-animate"><a href="#"><span class="icon-twitter"></span></a></li>
                <li class="ftco-animate"><a href="#"><span class="icon-facebook"></span></a></li>
                <li class="ftco-animate"><a href="#"><span class="icon-instagram"></span></a></li>
              </ul>
            </div>
          </div>
          <div class="col-md">
            <div class="ftco-footer-widget mb-4 ml-md-5">
              <h2 class="ftco-heading-2">Li√™n k·∫øt h·ªØu √≠ch</h2>
              <ul class="list-unstyled">
                <li><a href="#" class="py-2 d-block">Blog</a></li>
                <li><a href="#" class="py-2 d-block">Ph√≤ng</a></li>
                <li><a href="#" class="py-2 d-block">Ti·ªán √≠ch</a></li>
                <li><a href="#" class="py-2 d-block">Th·∫ª qu√† t·∫∑ng</a></li>
              </ul>
            </div>
          </div>
          <div class="col-md">
             <div class="ftco-footer-widget mb-4">
              <h2 class="ftco-heading-2">Ch√≠nh s√°ch</h2>
              <ul class="list-unstyled">
                <li><a href="#" class="py-2 d-block">Tuy·ªÉn d·ª•ng</a></li>
                <li><a href="#" class="py-2 d-block">V·ªÅ ch√∫ng t√¥i</a></li>
                <li><a href="#" class="py-2 d-block">Li√™n h·ªá</a></li>
                <li><a href="#" class="py-2 d-block">D·ªãch v·ª•</a></li>
              </ul>
            </div>
          </div>
          <div class="col-md">
            <div class="ftco-footer-widget mb-4">
              <h2 class="ftco-heading-2">B·∫°n c·∫ßn h·ªó tr·ª£?</h2>
            	<div class="block-23 mb-3">
	              <ul>
                <li><span class="icon icon-map-marker"></span><span class="text">123 ƒê∆∞·ªùng Bi·ªÉn Xanh, Th√†nh ph·ªë Bi·ªÉn, Vi·ªát Nam</span></li>
                <li><a href="#"><span class="icon icon-phone"></span><span class="text">+84 901 329 227</span></a></li>
                <li><a href="#"><span class="icon icon-envelope"></span><span class="text">support@resortdeluxe.vn</span></a></li>
	              </ul>
	            </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12 text-center">
            <p style="color: #9ca3af; margin: 0; padding: 20px 0;">
              Copyright &copy; <script>document.write(new Date().getFullYear());</script> Resort Deluxe. All rights reserved.
            </p>
          </div>
        </div>
      </div>
    </footer>
    
  

  <!-- loader -->
  <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>


  <script src="js/jquery.min.js"></script>
  <script src="js/jquery-migrate-3.0.1.min.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/jquery.easing.1.3.js"></script>
  <script src="js/jquery.waypoints.min.js"></script>
  <script src="js/jquery.stellar.min.js"></script>
  <script src="js/owl.carousel.min.js"></script>
  <script src="js/jquery.magnific-popup.min.js"></script>
  <script src="js/aos.js"></script>
  <script src="js/jquery.animateNumber.min.js"></script>
  <script src="js/bootstrap-datepicker.js"></script>
  <script src="js/scrollax.min.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
  <script src="js/google-map.js"></script>
  <script src="js/main.js"></script>
  
  <!-- Navbar Authentication Handler -->
  <script src="js/navbar-auth.js"></script>
  
  <!-- Restaurant menu loader -->
  <script>
    // Global variables for menu management
    let allMenuItems = [];
    let filteredMenuItems = [];
    
    // Debounce function for search
    function debounce(func, wait) {
      let timeout;
      return function executedFunction(...args) {
        const later = () => {
          clearTimeout(timeout);
          func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
      };
    }
    
    async function loadRestaurantMenu(){
      const container = document.getElementById('restaurantMenuList');
      if(!container){ 
        console.warn('[Restaurant] Menu container not found');
        return; 
      }
      
      // Show loading state
      container.innerHTML = `
        <div class="col-12 text-center py-5">
          <div class="spinner-border text-primary" role="status">
            <span class="sr-only">ƒêang t·∫£i menu...</span>
          </div>
          <p class="mt-3 text-muted">ƒêang t·∫£i menu t·ª´ h·ªá th·ªëng...</p>
        </div>`;
      
      const url = `${location.origin}/api/services/restaurant/menu?_=${Date.now()}`;
      console.log('[Restaurant] Fetching menu from:', url);
      
      try{
        const resp = await fetch(url, { 
          cache: 'no-store',
          headers: {
            'Accept': 'application/json'
          }
        });
        console.log('[Restaurant] Response status:', resp.status, resp.statusText);
        
        if(!resp.ok){
          const errorText = await resp.text();
          console.error('[Restaurant] Failed to load menu:', resp.status, errorText);
          container.innerHTML = `
            <div class="col-12 text-center text-danger py-5">
              <p><strong>Kh√¥ng th·ªÉ t·∫£i menu</strong></p>
              <p class="text-muted">Vui l√≤ng th·ª≠ l·∫°i sau ho·∫∑c li√™n h·ªá b·ªô ph·∫≠n h·ªó tr·ª£.</p>
            </div>`;
          return; 
        }
        
        let data;
        try {
          data = await resp.json();
        } catch (jsonErr) {
          const textData = await resp.text();
          console.error('[Restaurant] JSON parse error. Response text:', textData);
          throw new Error('Invalid JSON response: ' + textData.substring(0, 100));
        }
        
        console.log('[Restaurant] API Response data:', data);
        
        const items = Array.isArray(data) ? data : (data.items || data.menuItems || []);
        
        if(items.length === 0){
          console.warn('[Restaurant] No menu items found in response:', data);
          container.innerHTML = `
            <div class="col-12 text-center text-muted py-5">
              <p><strong>Menu ƒëang ƒë∆∞·ª£c c·∫≠p nh·∫≠t...</strong></p>
              <p class="small">Hi·ªán t·∫°i ch∆∞a c√≥ m√≥n ƒÉn n√†o trong menu. Vui l√≤ng quay l·∫°i sau.</p>
            </div>`;
          return;
        }
        
        console.log(`[Restaurant] ‚úÖ Found ${items.length} menu items:`, items);
        
        // Store all items for filtering/sorting
        allMenuItems = items;
        
        // Apply initial filters and sorting
        applyFiltersAndSort();
        
        // Format price to VND
        const formatVND = (v) => {
          const num = Number(v || 0);
          if (num === 0) return 'Li√™n h·ªá';
          return new Intl.NumberFormat('vi-VN').format(num) + ' ‚Ç´';
        };
        
        // Menu rendering is now handled by renderMenuItems function below
        
        // Render menu items directly into the row (no nested columns)
        // The makeItemHTML already includes col-md-6, so just append directly
        renderMenuItems(filteredMenuItems);
        console.log('[Restaurant] Menu rendered successfully with', filteredMenuItems.length, 'items');
        
        // Force display and grid layout
        container.style.display = 'flex';
        container.style.flexWrap = 'wrap';
        container.style.visibility = 'visible';
        container.style.opacity = '1';
        container.style.marginLeft = '-12px';
        container.style.marginRight = '-12px';
        
        // Force all column children to use flexbox properly
        setTimeout(() => {
          const columns = container.querySelectorAll('[class*="col-"]');
          columns.forEach(col => {
            if (col instanceof HTMLElement) {
              col.style.display = 'block';
              col.style.boxSizing = 'border-box';
              const winWidth = window.innerWidth;
              if (winWidth >= 992) {
                // Large: 3 columns (33.333%)
                col.style.width = '33.333333%';
              } else if (winWidth >= 768) {
                // Medium: 2 columns (50%)
                col.style.width = '50%';
              } else if (winWidth >= 576) {
                // Small: 2 columns (50%)
                col.style.width = '50%';
              } else {
                // Mobile: 1 column (100%)
                col.style.width = '100%';
              }
            }
          });
        }, 100);
        
        // Verify DOM was updated (optional check - not critical)
        setTimeout(() => {
          // Check for menu cards or any children in container
          const renderedItems = container.querySelectorAll('.menu-card, .pricing-entry, [class*="col-"]');
          const childrenCount = container.children.length;
          
          console.log('[Restaurant] DOM check - found', renderedItems.length, 'rendered menu items');
          console.log('[Restaurant] Container children count:', childrenCount);
          
          // Only warn if container has no children at all (empty state)
          if (childrenCount === 0 && filteredMenuItems.length > 0) {
            console.warn('[Restaurant] ‚ö†Ô∏è WARNING: Container has no children but items were rendered!');
            console.warn('[Restaurant] Container HTML length:', container.innerHTML.length);
            console.warn('[Restaurant] Container innerHTML preview:', container.innerHTML.substring(0, 200));
          } else if (renderedItems.length > 0 || childrenCount > 0) {
            // Menu items are present - ensure visibility
            renderedItems.forEach((item, idx) => {
              if (item instanceof HTMLElement) {
                item.style.display = item.style.display || 'block';
                item.style.visibility = 'visible';
                item.style.opacity = '1';
              }
            });
            
            // Also ensure all direct children are visible
            Array.from(container.children).forEach((child, idx) => {
              if (child instanceof HTMLElement) {
                child.style.display = child.style.display || 'block';
                child.style.visibility = 'visible';
                child.style.opacity = '1';
              }
            });
            
            console.log('[Restaurant] ‚úÖ Menu items are visible in DOM');
          }
        }, 300);
        
        // Trigger animations if available
        if (typeof AOS !== 'undefined') {
          AOS.refresh();
        }
        
        // Trigger jQuery animations if available
        if (typeof $ !== 'undefined' && $.fn.addClass) {
          $(container).find('.ftco-animate').each(function() {
            $(this).addClass('fadeInUp');
          });
        }
      }catch(err){
        console.error('[Restaurant] Error loading menu:', err);
        container.innerHTML = `
          <div class="col-12 text-center text-danger py-5">
            <p><strong>L·ªói khi t·∫£i menu</strong></p>
            <p class="text-muted">${err.message || 'Vui l√≤ng t·∫£i l·∫°i trang ho·∫∑c li√™n h·ªá h·ªó tr·ª£.'}</p>
          </div>`;
      }
    }
    
    // Load menu on page load and navigation (with pageshow for back/forward cache)
    function initMenuLoader() {
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', loadRestaurantMenu);
      } else {
        loadRestaurantMenu();
      }
      
      // Reload on pageshow (handles back/forward navigation)
      window.addEventListener('pageshow', function(event) {
        if (event.persisted || (performance.navigation && performance.navigation.type === 2)) {
          loadRestaurantMenu();
        }
      });
    }
    
    // Shopping Cart Management - MUST BE DEFINED BEFORE initMenuLoader
    let shoppingCart = [];
    
    // Ensure addToCart is available globally before menu loads
    window.addToCart = function(serviceId, serviceName, price) {
      console.log('[addToCart] Called with:', { serviceId, serviceName, price });
      
      // Try to get quantity from main display or quick view modal
      let qtyEl = document.getElementById(`qty-${serviceId}`);
      let quickViewQtyEl = document.getElementById(`quickViewQty-${serviceId}`);
      
      // Priority: quick view modal quantity if modal is open, otherwise main display
      let quantity = 0;
      if (quickViewQtyEl && document.getElementById('quickViewModal')?.classList.contains('show')) {
        quantity = parseInt(quickViewQtyEl.textContent) || 0;
        qtyEl = quickViewQtyEl; // Use quick view for reset
      } else if (qtyEl) {
        quantity = parseInt(qtyEl.textContent) || 0;
      }
      
      console.log('[addToCart] Quantity from element:', quantity, 'Element:', qtyEl);
      
      // N·∫øu s·ªë l∆∞·ª£ng = 0, t·ª± ƒë·ªông set th√†nh 1
      if (quantity <= 0) {
        quantity = 1;
        if (qtyEl) {
          qtyEl.textContent = '1';
        }
        if (quickViewQtyEl) {
          quickViewQtyEl.textContent = '1';
        }
        console.log('[addToCart] ‚ö†Ô∏è Quantity was 0, auto-set to 1');
      }
      
      const existingIndex = shoppingCart.findIndex(item => item.serviceId === serviceId);
      if (existingIndex >= 0) {
        // N·∫øu ƒë√£ c√≥ trong cart, c·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng
        shoppingCart[existingIndex].quantity = quantity;
        console.log('[addToCart] ‚úÖ Updated existing item in cart:', shoppingCart[existingIndex]);
        
        // Show success notification
        const message = `‚úÖ ƒê√£ c·∫≠p nh·∫≠t "${serviceName}" (${quantity} ph·∫ßn) trong gi·ªè h√†ng!`;
        if (typeof showToast === 'function') {
          showToast(message, 'success');
        } else if (window.showToast) {
          window.showToast(message, 'success');
        } else {
          // Fallback: Create custom notification
          const notification = document.createElement('div');
          notification.style.cssText = 'position: fixed; top: 20px; right: 20px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 16px 24px; border-radius: 12px; box-shadow: 0 8px 24px rgba(16,185,129,0.4); z-index: 10000; animation: slideInUp 0.4s ease; font-weight: 600; font-size: 14px; max-width: 350px;';
          notification.textContent = message;
          document.body.appendChild(notification);
          setTimeout(() => {
            notification.style.animation = 'slideInUp 0.4s ease reverse';
            setTimeout(() => notification.remove(), 400);
          }, 3000);
        }
      } else {
        // Th√™m m·ªõi v√†o cart
        const newItem = {
          serviceId: serviceId,
          serviceName: serviceName,
          price: price,
          quantity: quantity
        };
        shoppingCart.push(newItem);
        console.log('[addToCart] ‚úÖ Added new item to cart:', newItem);
        
        // Show success notification with animation
        const message = `‚úÖ ƒê√£ th√™m "${serviceName}" (${quantity} ph·∫ßn) v√†o gi·ªè h√†ng th√†nh c√¥ng!`;
        if (typeof showToast === 'function') {
          showToast(message, 'success');
        } else if (window.showToast) {
          window.showToast(message, 'success');
        } else {
          // Fallback: Create custom notification
          const notification = document.createElement('div');
          notification.style.cssText = 'position: fixed; top: 20px; right: 20px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 16px 24px; border-radius: 12px; box-shadow: 0 8px 24px rgba(16,185,129,0.4); z-index: 10000; animation: slideInUp 0.4s ease; font-weight: 600; font-size: 14px; max-width: 350px;';
          notification.textContent = message;
          document.body.appendChild(notification);
          setTimeout(() => {
            notification.style.animation = 'slideInUp 0.4s ease reverse';
            setTimeout(() => notification.remove(), 400);
          }, 3000);
        }
        
        // Add visual feedback - animate cart icon
        const cartBadge = document.querySelector('.cart-badge, #cartBadge');
        if (cartBadge) {
          cartBadge.style.animation = 'pulse 0.5s ease-in-out';
          setTimeout(() => {
            cartBadge.style.animation = '';
          }, 500);
        }
        
        // Add visual feedback to the button
        const addBtn = document.querySelector(`.btn-add-to-cart-new[data-service-id="${serviceId}"]`);
        if (addBtn) {
          const originalBg = addBtn.style.background;
          addBtn.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
          addBtn.style.animation = 'bounceIn 0.5s ease';
          setTimeout(() => {
            addBtn.style.background = originalBg;
            addBtn.style.animation = '';
          }, 500);
        }
      }
      
      saveCart();
      updateCartUI();
      
      // Reset quantity display
      if (qtyEl) {
        qtyEl.textContent = '0';
        console.log('[addToCart] ‚úÖ Reset quantity display to 0');
      }
      
      console.log('[addToCart] ‚úÖ Cart after adding:', shoppingCart);
    };
    
    initMenuLoader();
    
    // Load cart from localStorage
    function loadCart() {
      try {
        const saved = localStorage.getItem('restaurantCart');
        if (saved) {
          shoppingCart = JSON.parse(saved);
          updateCartUI();
        }
      } catch (e) {
        console.error('[Cart] Error loading cart:', e);
        shoppingCart = [];
      }
    }
    
    // Save cart to localStorage
    function saveCart() {
      try {
        localStorage.setItem('restaurantCart', JSON.stringify(shoppingCart));
        updateCartUI();
      } catch (e) {
        console.error('[Cart] Error saving cart:', e);
      }
    }
    
    // Update cart UI (badge, floating button)
    function updateCartUI() {
      const totalItems = shoppingCart.reduce((sum, item) => sum + item.quantity, 0);
      const cartBadge = document.getElementById('cartBadge');
      const cartBtn = document.getElementById('cartFloatingBtn');
      
      console.log('[Cart] Updating UI - Total items:', totalItems, 'Cart:', shoppingCart);
      
      if (cartBadge) {
        if (totalItems > 0) {
          cartBadge.textContent = totalItems;
          cartBadge.style.display = 'block';
        } else {
          cartBadge.style.display = 'none';
        }
      }
      
      if (cartBtn) {
        // Always show cart button if it exists (even if empty, user can click to see empty cart message)
        cartBtn.style.display = 'block';
        console.log('[Cart] ‚úÖ Cart button displayed');
      } else {
        console.warn('[Cart] ‚ö†Ô∏è Cart button element not found!');
      }
    }
    
    // Adjust quantity for a menu item
    window.adjustQuantity = function(serviceId, delta) {
      const qtyEl = document.getElementById(`qty-${serviceId}`);
      if (!qtyEl) return;
      
      let currentQty = parseInt(qtyEl.textContent) || 0;
      const newQty = currentQty + delta;
      
      // Kh√¥ng cho ph√©p quantity < 0
      if (newQty < 0) {
        if (window.showToast) {
          showToast('S·ªë l∆∞·ª£ng kh√¥ng th·ªÉ nh·ªè h∆°n 0', 'warning');
        }
        return;
      }
      
      currentQty = Math.max(0, newQty);
      qtyEl.textContent = currentQty;
      
      // Update cart if quantity > 0
      if (currentQty > 0) {
        const existingIndex = shoppingCart.findIndex(item => item.serviceId === serviceId);
        if (existingIndex >= 0) {
          shoppingCart[existingIndex].quantity = currentQty;
        }
        // N·∫øu ch∆∞a c√≥ trong cart, ch·ªâ c·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng hi·ªÉn th·ªã, ch∆∞a th√™m v√†o cart
        // Ph·∫£i click "Th√™m v√†o gi·ªè" ƒë·ªÉ th√™m v√†o cart
      } else {
        // Remove from cart if quantity is 0
        shoppingCart = shoppingCart.filter(item => item.serviceId !== serviceId);
        saveCart();
        updateCartUI();
      }
    };
    
    // Add to cart - Already defined above, this is just a reference
    // The actual function is defined before initMenuLoader() to ensure it's available when buttons are rendered
    
    // Close cart modal helper (Bootstrap 4 compatible)
    window.closeCartModal = function() {
      const modalEl = document.getElementById('cartModal');
      if (modalEl) {
        // Try Bootstrap 4/5 API
        if (typeof jQuery !== 'undefined' && jQuery(modalEl).modal) {
          jQuery(modalEl).modal('hide');
        } else if (typeof bootstrap !== 'undefined' && bootstrap.Modal) {
          // Bootstrap 5
          try {
            const modal = bootstrap.Modal.getInstance(modalEl);
            if (modal) {
              modal.hide();
            } else {
              const newModal = new bootstrap.Modal(modalEl);
              newModal.hide();
            }
          } catch (e) {
            // Fallback: manual close
            jQuery(modalEl).modal('hide');
          }
        } else {
          // Fallback: manual close
          modalEl.classList.remove('show');
          modalEl.style.display = 'none';
          modalEl.setAttribute('aria-hidden', 'true');
          modalEl.removeAttribute('aria-modal');
          document.body.classList.remove('modal-open');
          document.body.style.overflow = '';
          document.body.style.paddingRight = '';
          const backdrop = document.querySelector('.modal-backdrop');
          if (backdrop) backdrop.remove();
        }
      }
    };
    
    // Close quick view modal helper (Bootstrap 4 compatible)
    window.closeQuickViewModal = function() {
      const modalEl = document.getElementById('quickViewModal');
      if (modalEl) {
        // Try Bootstrap 4/5 API
        if (typeof jQuery !== 'undefined' && jQuery(modalEl).modal) {
          jQuery(modalEl).modal('hide');
        } else if (typeof bootstrap !== 'undefined' && bootstrap.Modal) {
          // Bootstrap 5
          try {
            const modal = bootstrap.Modal.getInstance(modalEl);
            if (modal) {
              modal.hide();
            } else {
              const newModal = new bootstrap.Modal(modalEl);
              newModal.hide();
            }
          } catch (e) {
            // Fallback: manual close
            jQuery(modalEl).modal('hide');
          }
        } else {
          // Fallback: manual close
          modalEl.classList.remove('show');
          modalEl.style.display = 'none';
          modalEl.setAttribute('aria-hidden', 'true');
          modalEl.removeAttribute('aria-modal');
          document.body.classList.remove('modal-open');
          document.body.style.overflow = '';
          document.body.style.paddingRight = '';
          const backdrop = document.querySelector('.modal-backdrop');
          if (backdrop) backdrop.remove();
        }
      }
    };
    
    // Show cart modal (Bootstrap 4 compatible)
    window.showCartModal = function() {
      const modal = document.getElementById('cartModal');
      if (!modal) {
        console.error('[showCartModal] Cart modal not found in DOM');
        if (typeof showToast === 'function') {
          showToast('L·ªói: Kh√¥ng t√¨m th·∫•y modal gi·ªè h√†ng. Vui l√≤ng t·∫£i l·∫°i trang.', 'error');
        } else {
          alert('L·ªói: Kh√¥ng t√¨m th·∫•y modal gi·ªè h√†ng. Vui l√≤ng t·∫£i l·∫°i trang.');
        }
        return;
      }
      
      updateCartModalContent();
      if (typeof jQuery !== 'undefined' && jQuery(modal).modal) {
        jQuery(modal).modal('show');
      } else if (typeof bootstrap !== 'undefined' && bootstrap.Modal) {
        try {
          const existingModal = bootstrap.Modal.getInstance(modal);
          if (existingModal) {
            existingModal.show();
          } else {
            new bootstrap.Modal(modal).show();
          }
        } catch (e) {
          console.error('[showCartModal] Bootstrap modal error:', e);
          if (typeof jQuery !== 'undefined' && jQuery(modal).modal) {
            jQuery(modal).modal('show');
          } else {
            // Fallback
            modal.classList.add('show');
            modal.style.display = 'block';
            modal.setAttribute('aria-hidden', 'false');
            modal.setAttribute('aria-modal', 'true');
            document.body.classList.add('modal-open');
            document.body.style.overflow = 'hidden';
            const backdrop = document.querySelector('.modal-backdrop');
            if (!backdrop) {
              const newBackdrop = document.createElement('div');
              newBackdrop.className = 'modal-backdrop fade show';
              document.body.appendChild(newBackdrop);
            }
          }
        }
      } else {
        // Fallback
        modal.classList.add('show');
        modal.style.display = 'block';
        modal.setAttribute('aria-hidden', 'false');
        modal.setAttribute('aria-modal', 'true');
        document.body.classList.add('modal-open');
        document.body.style.overflow = 'hidden';
        const backdrop = document.querySelector('.modal-backdrop');
        if (!backdrop) {
          const newBackdrop = document.createElement('div');
          newBackdrop.className = 'modal-backdrop fade show';
          document.body.appendChild(newBackdrop);
        }
      }
    };
    
    // Update cart modal content
    function updateCartModalContent() {
      // Set min datetime for delivery time input
      const deliveryTimeInput = document.getElementById('orderDeliveryTime');
      if (deliveryTimeInput) {
        const now = new Date();
        now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
        deliveryTimeInput.min = now.toISOString().slice(0, 16);
      }
      const cartItemsList = document.getElementById('cartItemsList');
      const cartTotal = document.getElementById('cartTotal');
      
      if (!cartItemsList) return;
      
      if (shoppingCart.length === 0) {
        cartItemsList.innerHTML = '<p class="text-center text-muted py-4">Gi·ªè h√†ng tr·ªëng</p>';
        if (cartTotal) cartTotal.textContent = '0 ‚Ç´';
        return;
      }
      
      const formatVND = (v) => {
        const num = Number(v || 0);
        return new Intl.NumberFormat('vi-VN').format(num) + ' ‚Ç´';
      };
      
      let html = '<div class="list-group">';
      let total = 0;
      
      shoppingCart.forEach((item, index) => {
        const itemTotal = item.price * item.quantity;
        total += itemTotal;
        
        html += `
          <div class="list-group-item">
            <div class="d-flex justify-content-between align-items-start">
              <div class="flex-grow-1">
                <h6 class="mb-1">${item.serviceName}</h6>
                <small class="text-muted">${formatVND(item.price)} / ph·∫ßn</small>
              </div>
              <div class="d-flex align-items-center gap-3">
                <div class="quantity-control" style="display: flex; align-items: center; gap: 0.5rem;">
                  <button type="button" class="btn btn-sm btn-outline-secondary" onclick="updateCartItem(${item.serviceId}, ${item.quantity - 1})">‚àí</button>
                  <span style="min-width: 40px; text-align: center; font-weight: 600;">${item.quantity}</span>
                  <button type="button" class="btn btn-sm btn-outline-secondary" onclick="updateCartItem(${item.serviceId}, ${item.quantity + 1})">+</button>
                </div>
                <div style="min-width: 100px; text-align: right;">
                  <strong>${formatVND(itemTotal)}</strong>
                </div>
                <button type="button" class="btn btn-sm btn-outline-danger" onclick="removeCartItem(${item.serviceId})">
                  <i class="icon-trash"></i>
                </button>
              </div>
            </div>
          </div>
        `;
      });
      
      html += '</div>';
      cartItemsList.innerHTML = html;
      
      if (cartTotal) {
        cartTotal.textContent = formatVND(total);
      }
    }
    
    // Update cart item quantity
    window.updateCartItem = function(serviceId, newQuantity) {
      // Kh√¥ng cho ph√©p set quantity = 0, n·∫øu = 0 th√¨ x√≥a kh·ªèi cart
      if (newQuantity <= 0) {
        removeCartItem(serviceId);
        if (typeof showToast === 'function') {
          showToast('ƒê√£ x√≥a m√≥n kh·ªèi gi·ªè h√†ng (s·ªë l∆∞·ª£ng ph·∫£i l·ªõn h∆°n 0)', 'info');
        }
        return;
      }
      
      const item = shoppingCart.find(i => i.serviceId === serviceId);
      if (item) {
        item.quantity = newQuantity;
        saveCart();
        updateCartModalContent();
        
        // Update quantity display on menu
        const qtyEl = document.getElementById(`qty-${serviceId}`);
        if (qtyEl) qtyEl.textContent = newQuantity;
      }
    };
    
    // Remove item from cart
    window.removeCartItem = function(serviceId) {
      shoppingCart = shoppingCart.filter(item => item.serviceId !== serviceId);
      saveCart();
      updateCartModalContent();
      updateCartUI();
      
      // Reset quantity display on menu
      const qtyEl = document.getElementById(`qty-${serviceId}`);
      if (qtyEl) qtyEl.textContent = '0';
    };
    
    // Submit order
    window.submitOrder = async function() {
      // Validate: L·ªçc c√°c item c√≥ quantity <= 0
      const validCartItems = shoppingCart.filter(item => item.quantity > 0);
      
      if (validCartItems.length === 0) {
        if (typeof showToast === 'function') {
          showToast('Kh√¥ng th·ªÉ ƒë·∫∑t h√†ng: T·∫•t c·∫£ m√≥n ƒë·ªÅu c√≥ s·ªë l∆∞·ª£ng b·∫±ng 0. Vui l√≤ng ch·ªçn s·ªë l∆∞·ª£ng l·ªõn h∆°n 0.', 'warning');
        } else {
          alert('Kh√¥ng th·ªÉ ƒë·∫∑t h√†ng: T·∫•t c·∫£ m√≥n ƒë·ªÅu c√≥ s·ªë l∆∞·ª£ng b·∫±ng 0. Vui l√≤ng ch·ªçn s·ªë l∆∞·ª£ng l·ªõn h∆°n 0.');
        }
        return;
      }
      
      // Ki·ªÉm tra n·∫øu c√≥ item c√≥ quantity <= 0 trong cart
      const invalidItems = shoppingCart.filter(item => item.quantity <= 0);
      if (invalidItems.length > 0) {
        console.warn('[submitOrder] Removing invalid items with quantity <= 0:', invalidItems);
        // T·ª± ƒë·ªông lo·∫°i b·ªè c√°c item kh√¥ng h·ª£p l·ªá
        shoppingCart = validCartItems;
        saveCart();
        updateCartModalContent();
        updateCartUI();
      }
      
      if (shoppingCart.length === 0) {
        if (typeof showToast === 'function') {
          showToast('Gi·ªè h√†ng tr·ªëng', 'warning');
        } else {
          alert('Gi·ªè h√†ng tr·ªëng');
        }
        return;
      }
      
      try {
        const submitBtn = document.getElementById('submitOrderBtn');
        if (submitBtn) {
          submitBtn.disabled = true;
          submitBtn.innerHTML = '<span class="spinner-border spinner-border-sm"></span> ƒêang x·ª≠ l√Ω...';
        }
        
        // Get customer ID from token if logged in
        let customerId = null;
        try {
          const token = localStorage.getItem('token');
          if (token) {
            const payload = JSON.parse(atob(token.split('.')[1]));
            // Try multiple ways to get CustomerId from JWT payload
            customerId = payload.CustomerId 
              || payload.customerId 
              || payload['CustomerId']
              || payload['customerId']
              || (payload['http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier'] && parseInt(payload['http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier']))
              || null;
            
            if (customerId) {
              customerId = parseInt(customerId);
              console.log('[Order] ‚úÖ CustomerId found in token:', customerId);
            } else {
              console.log('[Order] ‚ö†Ô∏è CustomerId not found in token payload. Payload keys:', Object.keys(payload));
              console.log('[Order] Full payload:', payload);
            }
          } else {
            console.log('[Order] ‚ÑπÔ∏è No token found - proceeding as walk-in customer');
          }
        } catch (e) {
          console.warn('[Order] ‚ö†Ô∏è Error parsing token:', e);
          console.log('[Order] ‚ÑπÔ∏è Proceeding as walk-in customer (no CustomerId required)');
        }
        
        // Map cart items to order items - ch·ªâ l·∫•y items c√≥ quantity > 0 (ƒë·∫£m b·∫£o an to√†n)
        const orderItems = shoppingCart
          .filter(item => item.quantity > 0) // Double-check: l·ªçc l·∫°i items h·ª£p l·ªá
          .map(item => ({
            serviceId: item.serviceId,
            quantity: item.quantity,
            specialNote: ''
          }));
        
        if (orderItems.length === 0) {
          throw new Error('Kh√¥ng c√≥ m√≥n n√†o h·ª£p l·ªá ƒë·ªÉ ƒë·∫∑t h√†ng. T·∫•t c·∫£ m√≥n ƒë·ªÅu c√≥ s·ªë l∆∞·ª£ng b·∫±ng 0.');
        }
        
        // Validate form using Validation utility
        const orderForm = document.getElementById('orderForm');
        if (orderForm && typeof window.Validation !== 'undefined') {
          const validationResult = window.Validation.validateForm(orderForm);
          if (!validationResult.valid) {
            const firstError = validationResult.errors[0];
            if (typeof showToast === 'function') {
              showToast(firstError.message, 'error');
            } else {
              alert(firstError.message);
            }
            firstError.input.focus();
            if (submitBtn) {
              submitBtn.disabled = false;
              submitBtn.innerHTML = '<i class="icon-check"></i> ƒê·∫∑t m√≥n ngay';
            }
            return;
          }
        }
        
        // Validate delivery address (required for ordering)
        const deliveryAddress = document.getElementById('orderDeliveryAddress')?.value?.trim() || '';
        if (!deliveryAddress || deliveryAddress.length < 3) {
          const message = 'Vui l√≤ng nh·∫≠p ƒë·ªãa ch·ªâ giao h√†ng (t·ªëi thi·ªÉu 3 k√Ω t·ª±, VD: Ph√≤ng 101 ho·∫∑c Nh√† h√†ng)';
          if (typeof showToast === 'function') {
            showToast(message, 'warning');
          } else {
            alert(message);
          }
          document.getElementById('orderDeliveryAddress')?.focus();
          if (submitBtn) {
            submitBtn.disabled = false;
            submitBtn.innerHTML = '<i class="icon-check"></i> ƒê·∫∑t m√≥n ngay';
          }
          return;
        }
        
        // Validate payment method
        const paymentMethod = document.getElementById('orderPaymentMethod')?.value || '';
        if (!paymentMethod) {
          const message = 'Vui l√≤ng ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n';
          if (typeof showToast === 'function') {
            showToast(message, 'warning');
          } else {
            alert(message);
          }
          document.getElementById('orderPaymentMethod')?.focus();
          if (submitBtn) {
            submitBtn.disabled = false;
            submitBtn.innerHTML = '<i class="icon-check"></i> ƒê·∫∑t m√≥n ngay';
          }
          return;
        }
        
        // Validate delivery time (if provided, must be in the future)
        const deliveryTimeInput = document.getElementById('orderDeliveryTime');
        if (deliveryTimeInput?.value) {
          const deliveryTime = new Date(deliveryTimeInput.value);
          const now = new Date();
          if (deliveryTime <= now) {
            const message = 'Th·ªùi gian nh·∫≠n m√≥n ph·∫£i sau th·ªùi ƒëi·ªÉm hi·ªán t·∫°i';
            if (typeof showToast === 'function') {
              showToast(message, 'warning');
            } else {
              alert(message);
            }
            deliveryTimeInput.focus();
            if (submitBtn) {
              submitBtn.disabled = false;
              submitBtn.innerHTML = '<i class="icon-check"></i> ƒê·∫∑t m√≥n ngay';
            }
            return;
          }
        }
        
        // Validate special requests length
        const specialRequests = document.getElementById('orderSpecialRequests')?.value || '';
        if (specialRequests.length > 500) {
          const message = 'Ghi ch√∫ ƒë·∫∑c bi·ªát kh√¥ng ƒë∆∞·ª£c v∆∞·ª£t qu√° 500 k√Ω t·ª±';
          if (typeof showToast === 'function') {
            showToast(message, 'warning');
          } else {
            alert(message);
          }
          document.getElementById('orderSpecialRequests')?.focus();
          if (submitBtn) {
            submitBtn.disabled = false;
            submitBtn.innerHTML = '<i class="icon-check"></i> ƒê·∫∑t m√≥n ngay';
          }
          return;
        }
        
        const orderData = {
          customerId: customerId,
          deliveryAddress: deliveryAddress,
          requestedDeliveryTime: document.getElementById('orderDeliveryTime')?.value ? new Date(document.getElementById('orderDeliveryTime').value).toISOString() : null,
          specialRequests: document.getElementById('orderSpecialRequests')?.value || '',
          paymentMethod: document.getElementById('orderPaymentMethod')?.value || 'Cash',
          items: orderItems
        };
        
        console.log('[Order] üì¶ Submitting order:', orderData);
        console.log('[Order] üì¶ Full order data:', JSON.stringify(orderData, null, 2));
        console.log('[Order] üì¶ API URL:', `${location.origin}/api/restaurant-orders`);
        console.log('[Order] üì¶ Token present:', !!localStorage.getItem('token'));
        console.log('[Order] üì¶ Order items count:', orderItems.length);
        console.log('[Order] üì¶ Order items:', orderItems);
        
        const response = await fetch(`${location.origin}/api/restaurant-orders`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${localStorage.getItem('token') || ''}`
          },
          body: JSON.stringify(orderData)
        });
        
        console.log('[Order] Response status:', response.status, response.statusText);
        console.log('[Order] Response ok:', response.ok);
        
        if (!response.ok) {
          const errorData = await response.json().catch(() => ({ message: 'Unknown error' }));
          console.error('[Order] ‚ùå Error response:', errorData);
          throw new Error(errorData.message || 'L·ªói khi ƒë·∫∑t m√≥n');
        }
        
        const order = await response.json();
        console.log('[Order] ‚úÖ Order created successfully:', order);
        console.log('[Order] Order details:', {
          orderId: order.orderId,
          orderNumber: order.orderNumber,
          totalAmount: order.totalAmount,
          itemsCount: order.orderItems?.length || 0
        });
        
        // Clear cart
        shoppingCart = [];
        saveCart();
        updateCartUI();
        
        // Close modal
        try {
          const modalEl = document.getElementById('cartModal');
          if (modalEl) {
            // Try Bootstrap 5
            if (typeof bootstrap !== 'undefined' && bootstrap.Modal) {
              const modal = bootstrap.Modal.getInstance(modalEl);
              if (modal) {
                modal.hide();
              } else {
                // Create new instance if needed
                const newModal = new bootstrap.Modal(modalEl);
                newModal.hide();
              }
            }
            // Fallback: remove modal backdrop manually
            const backdrop = document.querySelector('.modal-backdrop');
            if (backdrop) backdrop.remove();
            modalEl.classList.remove('show');
            modalEl.style.display = 'none';
            document.body.classList.remove('modal-open');
            document.body.style.overflow = '';
          }
        } catch (modalError) {
          console.warn('[Order] Error closing modal:', modalError);
        }
        
        // Show success message with animation
        const successMessage = `üéâ ƒê·∫∑t m√≥n th√†nh c√¥ng! M√£ ƒë∆°n: ${order.orderNumber}`;
        if (typeof showToast === 'function') {
          showToast(successMessage, 'success');
        } else if (window.showToast) {
          window.showToast(successMessage, 'success');
        } else {
          alert(successMessage);
        }
        
        // Redirect to order details or show order info
        setTimeout(() => {
          if (confirm(`ƒê∆°n h√†ng ${order.orderNumber} ƒë√£ ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng!\n\nB·∫°n c√≥ mu·ªën xem chi ti·∫øt ƒë∆°n h√†ng kh√¥ng?`)) {
            // Can navigate to order details page if exists
            window.location.href = `order-details.html?orderId=${order.orderId}`;
          }
        }, 500);
        
      } catch (error) {
        console.error('[Order] Error:', error);
        if (typeof showToast === 'function') {
          showToast('L·ªói khi ƒë·∫∑t m√≥n: ' + error.message, 'danger');
        } else {
          alert('L·ªói khi ƒë·∫∑t m√≥n: ' + error.message);
        }
      } finally {
        const submitBtn = document.getElementById('submitOrderBtn');
        if (submitBtn) {
          submitBtn.disabled = false;
          submitBtn.innerHTML = '<i class="icon-check"></i> ƒê·∫∑t m√≥n ngay';
        }
      }
    };
    
    // Initialize cart on page load
    loadCart();
    
    // Ensure cart button is visible after page load
    setTimeout(() => {
      updateCartUI();
      console.log('[Restaurant] ‚úÖ Cart initialized, UI updated');
    }, 500);
    
    // Filter and Sort Functions
    function applyFiltersAndSort() {
      let filtered = [...allMenuItems];
      
      // Filter by search term
      const searchTerm = document.getElementById('menuSearch')?.value.toLowerCase().trim() || '';
      if (searchTerm) {
        filtered = filtered.filter(item => {
          const name = (item.serviceName || item.name || '').toLowerCase();
          const desc = (item.description || item.desc || '').toLowerCase();
          return name.includes(searchTerm) || desc.includes(searchTerm);
        });
      }
      
      // Filter by category (if we have category data)
      const category = document.getElementById('menuCategory')?.value || '';
      if (category) {
        // This would need to match your category field in the API
        // For now, we'll skip category filtering if the field doesn't exist
        // filtered = filtered.filter(item => item.category === category);
      }
      
      // Apply sorting
      const sortBy = document.getElementById('menuSort')?.value || 'default';
      filtered = applySorting(filtered, sortBy);
      
      filteredMenuItems = filtered;
      
      // Update results count
      updateMenuResultsCount(filtered.length);
      
      // Re-render menu
      renderMenuItems(filtered);
    }
    
    function applySorting(items, sortBy) {
      const sorted = [...items];
      
      switch (sortBy) {
        case 'price-asc':
          sorted.sort((a, b) => {
            const priceA = a.price || 0;
            const priceB = b.price || 0;
            return priceA - priceB;
          });
          break;
        case 'price-desc':
          sorted.sort((a, b) => {
            const priceA = a.price || 0;
            const priceB = b.price || 0;
            return priceB - priceA;
          });
          break;
        case 'name-asc':
          sorted.sort((a, b) => {
            const nameA = (a.serviceName || a.name || '').toLowerCase();
            const nameB = (b.serviceName || b.name || '').toLowerCase();
            return nameA.localeCompare(nameB);
          });
          break;
        case 'name-desc':
          sorted.sort((a, b) => {
            const nameA = (a.serviceName || a.name || '').toLowerCase();
            const nameB = (b.serviceName || b.name || '').toLowerCase();
            return nameB.localeCompare(nameA);
          });
          break;
        case 'popular':
          // Sort by price descending as a proxy for popularity
          // You can replace this with actual popularity data from API
          sorted.sort((a, b) => {
            const priceA = a.price || 0;
            const priceB = b.price || 0;
            return priceB - priceA;
          });
          break;
        default:
          // Keep original order
          break;
      }
      
      return sorted;
    }
    
    function updateMenuResultsCount(count) {
      const countEl = document.getElementById('menuResultsCount');
      if (countEl) {
        if (count === 0) {
          countEl.textContent = 'Kh√¥ng t√¨m th·∫•y m√≥n n√†o';
          countEl.style.color = '#ef4444';
        } else if (count === 1) {
          countEl.textContent = `Hi·ªÉn th·ªã 1 m√≥n ƒÉn`;
          countEl.style.color = '#6b7280';
        } else {
          countEl.textContent = `Hi·ªÉn th·ªã ${count} m√≥n ƒÉn`;
          countEl.style.color = '#6b7280';
        }
      }
    }
    
    function renderMenuItems(items) {
      const container = document.getElementById('restaurantMenuList');
      if (!container) return;
      
      if (!Array.isArray(items) || items.length === 0) {
        container.innerHTML = `
          <div class="col-12 text-center py-5">
            <div class="empty-state">
              <div style="font-size: 60px; margin-bottom: 20px;">üçΩÔ∏è</div>
              <h4>Kh√¥ng t√¨m th·∫•y m√≥n n√†o</h4>
              <p class="text-muted">Vui l√≤ng th·ª≠ l·∫°i v·ªõi t·ª´ kh√≥a ho·∫∑c b·ªô l·ªçc kh√°c</p>
            </div>
          </div>
        `;
        return;
      }
      
      // Format price to VND
      const formatVND = (v) => {
        const num = Number(v || 0);
        if (num === 0) return 'Li√™n h·ªá';
        return new Intl.NumberFormat('vi-VN').format(num) + ' ‚Ç´';
      };
      
      const menuImages = ['menu-1.jpg', 'menu-2.jpg', 'menu-3.jpg', 'menu-4.jpg', 
                           'menu-5.jpg', 'menu-6.jpg', 'menu-7.jpg', 'menu-8.jpg'];
      
      let html = '';
      items.forEach((item, index) => {
        const name = item.serviceName || item.name || 'M√≥n ƒÉn';
        const price = formatVND(item.price || 0);
        const desc = item.description || item.desc || 'M√≥n ngon ƒë∆∞·ª£c ch·∫ø bi·∫øn tinh t·∫ø';
        const unit = item.unit ? ` / ${item.unit}` : '';
        
        let img;
        if (item.imageUrl && item.imageUrl.trim().length > 0) {
          img = item.imageUrl.startsWith('/') ? item.imageUrl : `/${item.imageUrl}`;
        } else {
          const imgIndex = index % menuImages.length;
          img = `images/${menuImages[imgIndex]}`;
        }
        
        html += `
          <div class="col-lg-4 col-md-6 col-sm-6 mb-4" style="display: block !important; visibility: visible !important; opacity: 1 !important; box-sizing: border-box; padding-left: 12px; padding-right: 12px; margin-bottom: 24px; flex: 0 0 auto;">
            <div class="menu-card-new ftco-animate" data-service-id="${item.serviceId}" style="background: #ffffff; border-radius: 20px; overflow: hidden; box-shadow: 0 4px 20px rgba(0,0,0,0.08); transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); height: 100%; display: flex !important; flex-direction: column; visibility: visible !important; opacity: 1 !important; position: relative; z-index: 1; border: 1px solid #f0f0f0;">
              <!-- Image Section -->
              <div class="menu-card-image-new" style="width: 100%; height: 240px; background-image: url(${img}); background-size: cover; background-position: center; position: relative; overflow: hidden;">
                <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(0,0,0,0.1) 100%);"></div>
                <!-- Quick View Button -->
                <button class="menu-card-quick-view-new" onclick="showQuickView(${item.serviceId}, event)" title="Xem nhanh" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0); background: rgba(255,255,255,0.95); color: #C8A97E; border: none; border-radius: 50%; width: 56px; height: 56px; display: flex; align-items: center; justify-content: center; font-size: 22px; cursor: pointer; transition: all 0.3s ease; z-index: 10; box-shadow: 0 4px 16px rgba(0,0,0,0.2);">
                  <i class="icon-eye"></i>
                </button>
                <!-- Price Badge -->
                <div style="position: absolute; top: 16px; right: 16px; background: linear-gradient(135deg, #C8A97E 0%, #B89968 100%); color: white; padding: 8px 16px; border-radius: 25px; font-size: 15px; font-weight: 700; box-shadow: 0 4px 12px rgba(200,169,126,0.4); backdrop-filter: blur(10px);">
                  ${price}${unit}
                </div>
              </div>
              
              <!-- Content Section -->
              <div class="menu-card-content-new" style="padding: 20px; flex: 1; display: flex; flex-direction: column; background: #ffffff;">
                <!-- Title -->
                <h3 class="menu-card-title-new" style="margin: 0 0 10px 0; font-size: 22px; font-weight: 700; color: #1a1a1a; line-height: 1.3; letter-spacing: -0.3px;">
                  ${name}
                </h3>
                
                <!-- Description -->
                <p class="menu-card-desc-new" style="margin: 0 0 20px 0; color: #6b7280; font-size: 14px; line-height: 1.6; flex: 1; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
                  ${desc}
                </p>
                
                <!-- Actions Section -->
                <div class="menu-actions-new" style="display: flex; gap: 8px; align-items: center; margin-top: auto; padding-top: 16px; border-top: 1px solid #f0f0f0;">
                  <!-- Quantity Control -->
                  <div class="quantity-control-new" style="display: flex; align-items: center; gap: 4px; background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 4px 6px; flex-shrink: 0;">
                    <button type="button" class="btn-qty-new btn-qty-minus" data-service-id="${item.serviceId}" data-delta="-1" style="background: #ffffff; border: none; border-radius: 6px; font-size: 16px; cursor: pointer; color: #C8A97E; padding: 4px 8px; line-height: 1; min-width: 28px; width: 28px; height: 28px; transition: all 0.2s; font-weight: 700; display: flex; align-items: center; justify-content: center; box-shadow: 0 1px 2px rgba(0,0,0,0.05);">‚àí</button>
                    <span id="qty-${item.serviceId}" class="quantity-display-new" style="min-width: 24px; width: 24px; text-align: center; font-weight: 700; color: #1a1a1a; font-size: 14px; padding: 0 4px;">0</span>
                    <button type="button" class="btn-qty-new btn-qty-plus" data-service-id="${item.serviceId}" data-delta="1" style="background: #ffffff; border: none; border-radius: 6px; font-size: 16px; cursor: pointer; color: #C8A97E; padding: 4px 8px; line-height: 1; min-width: 28px; width: 28px; height: 28px; transition: all 0.2s; font-weight: 700; display: flex; align-items: center; justify-content: center; box-shadow: 0 1px 2px rgba(0,0,0,0.05);">+</button>
                  </div>
                  
                  <!-- Add to Cart Button -->
                  <button type="button" class="btn-add-to-cart-new" data-service-id="${item.serviceId}" data-service-name="${name.replace(/"/g, '&quot;')}" data-price="${item.price || 0}" style="flex: 1; background: linear-gradient(135deg, #C8A97E 0%, #B89968 100%); color: white; border: none; border-radius: 10px; padding: 10px 16px; font-weight: 600; cursor: pointer; transition: all 0.3s; white-space: nowrap; box-shadow: 0 4px 12px rgba(200,169,126,0.3); font-size: 13px; display: flex; align-items: center; justify-content: center; gap: 6px; min-width: 0;" onmouseover="this.style.background='linear-gradient(135deg, #B89968 0%, #C8A97E 100%)'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 16px rgba(200,169,126,0.4)';" onmouseout="this.style.background='linear-gradient(135deg, #C8A97E 0%, #B89968 100%)'; this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(200,169,126,0.3)';">
                    <span style="font-size: 16px;">üõí</span>
                    <span>Th√™m v√†o gi·ªè</span>
                  </button>
                </div>
              </div>
            </div>
          </div>
        `;
      });
      
      container.innerHTML = html;
      
      console.log('[renderMenuItems] ‚úÖ Rendered', items.length, 'items. HTML length:', html.length);
      
      // Attach event listeners using event delegation for better reliability
      // Remove existing listener if any to avoid duplicates
      const existingHandler = container._menuClickHandler;
      if (existingHandler) {
        container.removeEventListener('click', existingHandler);
      }
      
      const clickHandler = function(e) {
        const target = e.target;
        
        // Skip if clicking on quick view button or its icon (support both old and new classes)
        if (target.closest('.menu-card-quick-view, .menu-card-quick-view-new') || target.classList.contains('icon-eye')) {
          return; // Let quick view handle its own click
        }
        
        // Handle quantity buttons - check both old and new classes
        const qtyBtn = target.closest('.btn-qty-plus, .btn-qty-minus, .btn-qty-new') || 
                      (target.classList.contains('btn-qty-plus') || target.classList.contains('btn-qty-minus') || target.classList.contains('btn-qty-new') ? target : null);
        if (qtyBtn) {
          e.preventDefault();
          e.stopPropagation();
          
          // Get serviceId from button attribute or parent card
          let serviceId = parseInt(qtyBtn.getAttribute('data-service-id'));
          if (!serviceId || isNaN(serviceId)) {
            const parentCard = qtyBtn.closest('.menu-card, .menu-card-new');
            serviceId = parseInt(parentCard?.getAttribute('data-service-id'));
          }
          
          // Get delta from attribute or determine from class names
          let delta = parseInt(qtyBtn.getAttribute('data-delta'));
          if (isNaN(delta)) {
            // Determine delta from class names - check for plus/minus classes first
            if (qtyBtn.classList.contains('btn-qty-plus')) {
              delta = 1;
            } else if (qtyBtn.classList.contains('btn-qty-minus')) {
              delta = -1;
            } else if (qtyBtn.classList.contains('btn-qty-new')) {
              // For btn-qty-new, check if it has plus or minus class
              if (qtyBtn.classList.contains('btn-qty-plus')) {
                delta = 1;
              } else if (qtyBtn.classList.contains('btn-qty-minus')) {
                delta = -1;
              } else {
                // Fallback: check button text or position
                const btnText = qtyBtn.textContent?.trim();
                delta = (btnText === '+' || btnText === 'Ôºã') ? 1 : -1;
              }
            }
          }
          
          if (serviceId && !isNaN(serviceId) && !isNaN(delta)) {
            console.log('[renderMenuItems] Quantity button clicked:', { serviceId, delta, target: target.tagName, qtyBtn: qtyBtn.tagName, classes: qtyBtn.className });
            if (typeof window.adjustQuantity === 'function') {
              window.adjustQuantity(serviceId, delta);
            } else {
              console.error('[renderMenuItems] adjustQuantity function not found');
              alert('L·ªói: Ch·ª©c nƒÉng ch∆∞a s·∫µn s√†ng. Vui l√≤ng t·∫£i l·∫°i trang.');
            }
          } else {
            console.error('[renderMenuItems] Could not find serviceId or delta for quantity button:', { serviceId, delta, qtyBtn });
          }
          return;
        }
        
        // Handle add to cart button (check if clicked on button or its child span) - support both old and new classes
        const addToCartBtn = target.closest('.btn-add-to-cart, .btn-add-to-cart-new') || 
                            (target.classList.contains('btn-add-to-cart') || target.classList.contains('btn-add-to-cart-new') ? target : null);
        if (addToCartBtn) {
          e.preventDefault();
          e.stopPropagation();
          
          const serviceId = parseInt(addToCartBtn.getAttribute('data-service-id') || 
                                     addToCartBtn.closest('.menu-card, .menu-card-new')?.getAttribute('data-service-id'));
          const serviceName = addToCartBtn.getAttribute('data-service-name') || '';
          const price = parseInt(addToCartBtn.getAttribute('data-price')) || 0;
          
          if (serviceId && !isNaN(serviceId)) {
            console.log('[renderMenuItems] Add to cart clicked:', { serviceId, serviceName, price, target: target.tagName });
            
            // Check quantity first
            const qtyEl = document.getElementById(`qty-${serviceId}`);
            const quantity = parseInt(qtyEl?.textContent || 0);
            
            if (quantity <= 0) {
              // Auto set quantity to 1 if 0
              if (qtyEl) {
                qtyEl.textContent = '1';
                if (typeof window.adjustQuantity === 'function') {
                  window.adjustQuantity(serviceId, 1);
                }
              }
            }
            
            if (typeof window.addToCart === 'function') {
              window.addToCart(serviceId, serviceName, price);
            } else {
              console.error('[renderMenuItems] addToCart function not found');
              if (window.showToast) {
                showToast('L·ªói: Ch·ª©c nƒÉng ch∆∞a s·∫µn s√†ng. Vui l√≤ng t·∫£i l·∫°i trang.', 'error');
              } else {
                alert('L·ªói: Ch·ª©c nƒÉng ch∆∞a s·∫µn s√†ng. Vui l√≤ng t·∫£i l·∫°i trang.');
              }
            }
          } else {
            console.error('[renderMenuItems] Could not find serviceId for add to cart button');
          }
          return;
        }
        
        // Handle click on menu card (outside buttons) - add to cart with quantity 1 - support both old and new classes
        const menuCard = target.closest('.menu-card, .menu-card-new');
        if (menuCard) {
          e.preventDefault();
          e.stopPropagation();
          const serviceId = parseInt(menuCard.getAttribute('data-service-id'));
          
          if (serviceId && !isNaN(serviceId)) {
            // Find item data from the rendered items
            const item = items.find(i => i.serviceId === serviceId);
            if (item) {
              const serviceName = item.serviceName || item.name || 'M√≥n ƒÉn';
              const price = item.price || 0;
              
              // Set quantity to 1 if it's 0
              const qtyEl = document.getElementById(`qty-${serviceId}`);
              if (qtyEl) {
                const currentQty = parseInt(qtyEl.textContent) || 0;
                if (currentQty === 0) {
                  qtyEl.textContent = '1';
                  if (typeof window.adjustQuantity === 'function') {
                    window.adjustQuantity(serviceId, 1);
                  }
                }
              }
              
              console.log('[renderMenuItems] Menu card clicked (outside buttons):', { serviceId, serviceName, price });
              if (typeof window.addToCart === 'function') {
                window.addToCart(serviceId, serviceName, price);
              } else {
                console.error('[renderMenuItems] addToCart function not found');
              }
            }
          }
        }
      };
      
      // Store handler reference and attach
      container._menuClickHandler = clickHandler;
      container.addEventListener('click', clickHandler);
      
      // Force display and grid layout
      container.style.display = 'flex';
      container.style.flexWrap = 'wrap';
      container.style.visibility = 'visible';
      container.style.opacity = '1';
      container.style.marginLeft = '-12px';
      container.style.marginRight = '-12px';
      
      // Force display of all child elements immediately
      requestAnimationFrame(() => {
        const children = Array.from(container.children);
        console.log('[renderMenuItems] Container children count after render:', children.length);
        
        children.forEach((child, idx) => {
          if (child instanceof HTMLElement) {
            // Ensure all Bootstrap column classes are visible
            child.style.display = 'block';
            child.style.visibility = 'visible';
            child.style.opacity = '1';
            child.style.boxSizing = 'border-box';
            
            // Find menu-card inside and ensure it's visible
            const menuCard = child.querySelector('.menu-card');
            if (menuCard instanceof HTMLElement) {
              menuCard.style.display = 'flex';
              menuCard.style.visibility = 'visible';
              menuCard.style.opacity = '1';
            }
          }
        });
        
        // Verify menu cards are visible
        const menuCards = container.querySelectorAll('.menu-card');
        console.log('[renderMenuItems] ‚úÖ Found', menuCards.length, 'menu cards in DOM');
        console.log('[renderMenuItems] ‚úÖ Forced display for', children.length, 'children');
      });
    }
    
    // Quick View Modal
    window.showQuickView = function(serviceId, event) {
      if (event) event.stopPropagation();
      
      const item = allMenuItems.find(m => m.serviceId === serviceId);
      if (!item) return;
      
      const formatVND = (v) => {
        const num = Number(v || 0);
        if (num === 0) return 'Li√™n h·ªá';
        return new Intl.NumberFormat('vi-VN').format(num) + ' ‚Ç´';
      };
      
      const modalHTML = `
        <div class="modal fade" id="quickViewModal" tabindex="-1">
          <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content" style="border-radius: 16px; overflow: hidden;">
              <div class="modal-header" style="background: linear-gradient(135deg, #c8a97e 0%, #b89968 100%); color: white; border: none;">
                <h5 class="modal-title">${item.serviceName || item.name || 'M√≥n ƒÉn'}</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close" onclick="closeQuickViewModal()"></button>
              </div>
              <div class="modal-body p-4">
                <div class="row">
                  <div class="col-md-5 mb-3 mb-md-0">
                    <img src="${item.imageUrl || 'images/menu-1.jpg'}" alt="${item.serviceName}" style="width: 100%; border-radius: 12px; object-fit: cover; height: 250px;">
                  </div>
                  <div class="col-md-7">
                    <h4 class="mb-3">${item.serviceName || item.name}</h4>
                    <p class="text-muted mb-3">${item.description || item.desc || 'M√≥n ngon ƒë∆∞·ª£c ch·∫ø bi·∫øn tinh t·∫ø'}</p>
                    <div class="mb-3">
                      <strong style="font-size: 24px; color: #c8a97e;">${formatVND(item.price)}</strong>
                      ${item.unit ? `<span class="text-muted">/ ${item.unit}</span>` : ''}
                    </div>
                    <div class="quantity-control d-flex align-items-center gap-3 mb-3">
                      <label style="margin: 0; font-weight: 600;">S·ªë l∆∞·ª£ng:</label>
                      <div class="d-flex align-items-center gap-2 border rounded p-2" style="border-color: #e5e7eb !important;">
                        <button type="button" class="btn btn-sm" onclick="adjustQuantity(${item.serviceId}, -1); updateQuickViewQty(${item.serviceId});">‚àí</button>
                        <span id="quickViewQty-${item.serviceId}" style="min-width: 40px; text-align: center; font-weight: 600;">0</span>
                        <button type="button" class="btn btn-sm" onclick="adjustQuantity(${item.serviceId}, 1); updateQuickViewQty(${item.serviceId});">+</button>
                      </div>
                    </div>
                    <button type="button" class="btn btn-primary w-100" id="quickViewAddToCartBtn" data-service-id="${item.serviceId}" data-service-name="${(item.serviceName || item.name || '').replace(/"/g, '&quot;')}" data-price="${item.price || 0}" style="background: #c8a97e; border: none;">
                      <i class="icon-shopping-cart"></i> Th√™m v√†o gi·ªè h√†ng
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      `;
      
      // Remove existing modal if any
      const existingModal = document.getElementById('quickViewModal');
      if (existingModal) existingModal.remove();
      
      document.body.insertAdjacentHTML('beforeend', modalHTML);
      
      // Show modal (Bootstrap 4 compatible)
      const modalEl = document.getElementById('quickViewModal');
      if (typeof jQuery !== 'undefined' && jQuery(modalEl).modal) {
        jQuery(modalEl).modal('show');
        updateQuickViewQty(serviceId);
      } else if (typeof bootstrap !== 'undefined' && bootstrap.Modal) {
        try {
          const modal = new bootstrap.Modal(modalEl);
          modal.show();
          updateQuickViewQty(serviceId);
        } catch (e) {
          jQuery(modalEl).modal('show');
          updateQuickViewQty(serviceId);
        }
      } else {
        // Fallback: manual show
        modalEl.classList.add('show');
        modalEl.style.display = 'block';
        modalEl.setAttribute('aria-hidden', 'false');
        modalEl.setAttribute('aria-modal', 'true');
        document.body.classList.add('modal-open');
        document.body.style.overflow = 'hidden';
        const backdrop = document.createElement('div');
        backdrop.className = 'modal-backdrop fade show';
        backdrop.onclick = closeQuickViewModal;
        document.body.appendChild(backdrop);
        updateQuickViewQty(serviceId);
      }
    };
    
    function updateQuickViewQty(serviceId) {
      const qtyEl = document.getElementById(`qty-${serviceId}`);
      const quickViewQtyEl = document.getElementById(`quickViewQty-${serviceId}`);
      const currentQty = parseInt(qtyEl?.textContent) || 0;
      if (quickViewQtyEl) quickViewQtyEl.textContent = currentQty;
    }
    
    // Event Listeners
    document.getElementById('menuSearch')?.addEventListener('input', debounce(applyFiltersAndSort, 300));
    document.getElementById('menuCategory')?.addEventListener('change', applyFiltersAndSort);
    document.getElementById('menuSort')?.addEventListener('change', applyFiltersAndSort);
    document.getElementById('resetFilters')?.addEventListener('click', () => {
      document.getElementById('menuSearch').value = '';
      document.getElementById('menuCategory').value = '';
      document.getElementById('menuSort').value = 'default';
      applyFiltersAndSort();
    });
  </script>
  
  <!-- Cart Modal -->
  <div class="modal fade" id="cartModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">üõí Gi·ªè h√†ng c·ªßa b·∫°n</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" onclick="closeCartModal()"></button>
        </div>
        <div class="modal-body">
          <div id="cartItemsList"><p class="text-center text-muted py-4">Gi·ªè h√†ng tr·ªëng</p></div>
          <div class="cart-summary mt-4 pt-3 border-top">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <strong style="font-size: 18px;">T·ªïng ti·ªÅn:</strong>
              <strong id="cartTotal" style="font-size: 20px; color: var(--color-primary-main, #C8A97E);">0 ‚Ç´</strong>
            </div>
          </div>
          <div id="orderForm" class="mt-4 needs-validation" novalidate>
            <h6 class="mb-3">Th√¥ng tin ƒë·∫∑t m√≥n</h6>
            <div class="mb-3">
              <label class="form-label">ƒê·ªãa ch·ªâ giao h√†ng <span class="text-danger">*</span></label>
              <input type="text" id="orderDeliveryAddress" class="form-control" 
                     placeholder="VD: Ph√≤ng 101 ho·∫∑c Nh√† h√†ng" 
                     required 
                     minlength="3" 
                     maxlength="500"
                     data-label="ƒê·ªãa ch·ªâ giao h√†ng">
              <div class="invalid-feedback"></div>
            </div>
            <div class="mb-3">
              <label class="form-label">Th·ªùi gian mong mu·ªën nh·∫≠n m√≥n (t√πy ch·ªçn)</label>
              <input type="datetime-local" id="orderDeliveryTime" class="form-control">
              <small class="text-muted">Th·ªùi gian ph·∫£i sau th·ªùi ƒëi·ªÉm hi·ªán t·∫°i</small>
            </div>
            <div class="mb-3">
              <label class="form-label">Ghi ch√∫ ƒë·∫∑c bi·ªát (t√πy ch·ªçn)</label>
              <textarea id="orderSpecialRequests" class="form-control" rows="2" 
                        placeholder="VD: Kh√¥ng cay, kh√¥ng h√†nh..." 
                        maxlength="500"></textarea>
              <small class="text-muted">T·ªëi ƒëa 500 k√Ω t·ª±</small>
            </div>
            <div class="mb-3">
              <label class="form-label">Ph∆∞∆°ng th·ª©c thanh to√°n <span class="text-danger">*</span></label>
              <select id="orderPaymentMethod" class="form-select" required data-label="Ph∆∞∆°ng th·ª©c thanh to√°n">
                <option value="">-- Ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n --</option>
                <option value="Cash">üíµ Thanh to√°n t·∫°i nh√† h√†ng</option>
                <option value="QR">üí≥ Chuy·ªÉn kho·∫£n QR</option>
                <option value="RoomCharge">üè® Charge v√†o ph√≤ng (n·∫øu c√≥ booking)</option>
              </select>
              <div class="invalid-feedback"></div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" onclick="closeCartModal()">ƒê√≥ng</button>
          <button type="button" class="btn btn-primary" onclick="submitOrder()" id="submitOrderBtn">
            <i class="icon-check"></i> ƒê·∫∑t m√≥n ngay
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast Notification and Validation -->
  <script src="/js/toast-notification.js"></script>
  <script src="/js/form-validation.js"></script>
  
  <!-- Include api.js for toast notifications if available -->
  <script src="../js/api.js"></script>
    
  </body>
</html>