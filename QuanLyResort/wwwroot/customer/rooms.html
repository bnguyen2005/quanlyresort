<!DOCTYPE html>
<html lang="vi">
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ph√≤ng ngh·ªâ | Resort Deluxe</title>
  <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="/css/tokens.css">
  <link rel="stylesheet" href="/css/globals.css">
  <link rel="stylesheet" href="/css/grid.css">
  <link rel="stylesheet" href="/css/components/navbar.css">
  <link rel="stylesheet" href="css/navbar-auth.css">
  <link rel="stylesheet" href="css/open-iconic-bootstrap.min.css">
  
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      padding-top: 0;
      overflow-x: hidden;
      background: linear-gradient(135deg, #f5ede0 0%, #fff8f0 50%, #ffffff 100%);
      min-height: 100vh;
    }
    .ftco-navbar {
      position: sticky !important;
      top: 0 !important;
      z-index: 1030 !important;
      background-color: #1a1a1a !important;
      transition: all 0.3s ease;
      width: 100% !important;
      margin: 0 !important;
    }
    .ftco-navbar.scrolled {
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    /* Modern Hero Section */
    .rooms-hero {
      background-image: url('images/bg_1.jpg');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      background-repeat: no-repeat;
      padding: 140px 0 100px;
      color: #fff;
      text-align: center;
      position: relative;
      overflow: hidden;
      margin-bottom: 60px;
      min-height: 500px;
      display: flex;
      align-items: center;
    }
    .rooms-hero::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: linear-gradient(135deg, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.5) 100%);
      z-index: 0;
    }
    .rooms-hero::after {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><defs><pattern id="grid" width="50" height="50" patternUnits="userSpaceOnUse"><path d="M 50 0 L 0 0 0 50" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
      opacity: 0.3;
      z-index: 1;
    }
    .rooms-hero-content {
      position: relative;
      z-index: 2;
      animation: slideUp 0.8s ease;
      width: 100%;
    }
    .rooms-hero h1 {
      font-size: 48px;
      font-weight: 700;
      margin-bottom: 20px;
      color: #ffffff !important;
      text-shadow: 0 2px 10px rgba(0,0,0,0.3);
      animation: fadeInDown 1s ease;
    }
    .rooms-hero p {
      font-size: 20px;
      color: #ffffff !important;
      opacity: 0.95;
      text-shadow: 0 2px 8px rgba(0,0,0,0.2);
      animation: fadeInUp 1.2s ease;
    }
    
    /* Main Content Layout - 2 Columns */
    .rooms-main-content {
      display: grid;
      grid-template-columns: 1fr 320px;
      gap: 30px;
      margin-top: 60px;
    }
    
    /* Results Header */
    .results-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 0;
      margin-bottom: 20px;
      border-bottom: 2px solid rgba(200,169,126,0.2);
    }
    .results-info {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .results-count {
      font-size: 16px;
      font-weight: 600;
      color: #1a1a1a;
    }
    .results-count::before {
      content: 'üìä';
      margin-right: 8px;
    }
    .sort-options {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .sort-options label {
      font-weight: 600;
      color: #374151;
      font-size: 14px;
      margin: 0;
    }
    .sort-select {
      padding: 8px 12px;
      border-radius: 8px;
      border: 2px solid #e5e7eb;
      font-size: 14px;
      background: #fff;
      cursor: pointer;
      transition: all 0.3s ease;
      min-width: 180px;
    }
    .sort-select:hover {
      border-color: #c8a97e;
    }
    .sort-select:focus {
      outline: none;
      border-color: #c8a97e;
      box-shadow: 0 0 0 3px rgba(200,169,126,0.1);
    }
    @media (max-width: 768px) {
      .results-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
      }
      .sort-select {
        width: 100%;
      }
    }
    
    /* Modern Filter Section - Vertical Sidebar */
    .filter-section-modern {
      background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 4px 20px rgba(200,169,126,0.15);
      position: sticky;
      top: 100px;
      height: fit-content;
      max-height: calc(100vh - 120px);
      overflow-y: auto;
      border: 2px solid rgba(200,169,126,0.1);
      animation: slideUp 0.8s ease;
    }
    .filter-header {
      margin-bottom: 24px;
      padding-bottom: 20px;
      border-bottom: 2px solid #f0f0f0;
    }
    .filter-header h3 {
      font-size: 22px;
      font-weight: 700;
      color: #1a1a1a;
      margin: 0;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .filter-header h3::before {
      content: 'üîç';
      font-size: 24px;
    }
    .filter-grid {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .filter-group label {
      font-weight: 600;
      color: #374151;
      font-size: 14px;
      margin-bottom: 0;
    }
    .filter-group .form-control,
    .filter-group .form-select {
      height: 48px;
      border-radius: 12px;
      border: 2px solid #e5e7eb;
      padding: 12px 16px;
      font-size: 14px;
      transition: all 0.3s ease;
      background: #fff;
      width: 100%;
    }
    .filter-group .form-control:focus,
    .filter-group .form-select:focus {
      border-color: #c8a97e;
      box-shadow: 0 0 0 4px rgba(200,169,126,0.1);
      outline: none;
    }
    .filter-actions {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-top: 10px;
    }
    .btn-filter {
      height: 48px;
      padding: 12px 24px;
      border-radius: 12px;
      font-weight: 600;
      font-size: 14px;
      transition: all 0.3s ease;
      border: none;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    .btn-filter-primary {
      background: linear-gradient(135deg, #c8a97e 0%, #b89968 100%);
      color: #fff;
      box-shadow: 0 4px 15px rgba(200,169,126,0.3);
    }
    .btn-filter-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(200,169,126,0.4);
    }
    .btn-filter-secondary {
      background: #fff;
      color: #6b7280;
      border: 2px solid #e5e7eb;
    }
    .btn-filter-secondary:hover {
      background: #f9fafb;
      border-color: #d1d5db;
      transform: translateY(-2px);
    }
    
    /* Rooms Content Area */
    .rooms-content-area {
      min-height: 400px;
    }
    
    /* Modern Room Cards */
    .rooms-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 24px;
    }
    .room-card-modern {
      background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 4px 20px rgba(200,169,126,0.15);
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      cursor: pointer;
      opacity: 0;
      transform: translateY(30px);
      animation: fadeInUp 0.6s ease forwards;
      border: 2px solid rgba(200,169,126,0.1);
      position: relative;
      height: 100%;
      display: flex;
      flex-direction: column;
    }
    .room-card-modern:nth-child(1) { animation-delay: 0.1s; }
    .room-card-modern:nth-child(2) { animation-delay: 0.2s; }
    .room-card-modern:nth-child(3) { animation-delay: 0.3s; }
    .room-card-modern:nth-child(4) { animation-delay: 0.4s; }
    .room-card-modern:nth-child(5) { animation-delay: 0.5s; }
    .room-card-modern:nth-child(6) { animation-delay: 0.6s; }
    .room-card-modern:hover {
      transform: translateY(-12px) scale(1.02);
      box-shadow: 0 20px 50px rgba(200,169,126,0.25);
      border-color: rgba(200,169,126,0.3);
    }
    .room-image-wrapper {
      position: relative;
      width: 100%;
      height: 0;
      padding-top: 70%; /* 16:9 aspect ratio */
      overflow: hidden;
      background: #eee;
      background-image: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 100%);
    }
    .room-image-wrapper img {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      display: block;
    }
    .room-image-wrapper img[src=""],
    .room-image-wrapper img:not([src]) {
      display: none;
    }
    .room-card-modern:hover .room-image-wrapper img {
      transform: scale(1.15);
    }
    .room-image-overlay {
      position: absolute;
      inset: 0;
      background: linear-gradient(to bottom, transparent 0%, rgba(0,0,0,0.4) 100%);
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .room-card-modern:hover .room-image-overlay {
      opacity: 1;
    }
    .room-badge-top {
      position: absolute;
      top: 16px;
      left: 16px;
      background: rgba(26,26,26,0.85);
      color: #fff;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 600;
      backdrop-filter: blur(10px);
      z-index: 2;
    }
    .room-badge-status {
      position: absolute;
      top: 16px;
      right: 16px;
      padding: 8px 14px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 700;
      z-index: 2;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }
    .room-badge-available {
      background: #16a34a;
      color: #fff;
    }
    .room-badge-unavailable {
      background: #dc2626;
      color: #fff;
    }
    .room-card-body {
      padding: 24px;
      flex: 1;
      display: flex;
      flex-direction: column;
    }
    .room-rating {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 4px;
      margin-bottom: 12px;
    }
    .room-rating i {
      color: #f59e0b;
      font-size: 16px;
    }
    .room-title {
      font-size: 22px;
      font-weight: 700;
      color: #1a1a1a;
      margin-bottom: 12px;
      text-align: center;
    }
    .room-price {
      text-align: center;
      margin-bottom: 16px;
    }
    .room-price-amount {
      font-size: 28px;
      font-weight: 700;
      color: #c8a97e;
      display: block;
    }
    .room-price-unit {
      font-size: 14px;
      color: #6b7280;
      margin-left: 4px;
    }
    .room-features {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
      padding: 16px 0;
      border-top: 1px solid #f0f0f0;
      border-bottom: 1px solid #f0f0f0;
    }
    .room-feature {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 14px;
      color: #6b7280;
    }
    .room-feature i {
      color: #c8a97e;
      font-size: 16px;
    }
    .room-actions {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-top: auto;
    }
    .btn-room-action {
      padding: 12px 20px;
      border-radius: 12px;
      font-weight: 600;
      font-size: 14px;
      transition: all 0.3s ease;
      border: none;
      cursor: pointer;
      text-decoration: none;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    .btn-room-primary {
      background: linear-gradient(135deg, #c8a97e 0%, #b89968 100%);
      color: #fff;
      box-shadow: 0 4px 12px rgba(200,169,126,0.3);
    }
    .btn-room-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 18px rgba(200,169,126,0.4);
      color: #fff;
    }
    .btn-room-primary:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    .btn-room-secondary {
      background: #fff;
      color: #6b7280;
      border: 2px solid #e5e7eb;
    }
    .btn-room-secondary:hover {
      background: #f9fafb;
      border-color: #c8a97e;
      color: #c8a97e;
      transform: translateY(-2px);
    }
    
    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 80px 20px;
      background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
      border-radius: 20px;
      box-shadow: 0 4px 20px rgba(200,169,126,0.15);
      border: 2px solid rgba(200,169,126,0.1);
    }
    .empty-state-icon {
      font-size: 80px;
      margin-bottom: 24px;
      opacity: 0.5;
    }
    .empty-state h3 {
      font-size: 24px;
      font-weight: 700;
      color: #1a1a1a;
      margin-bottom: 12px;
    }
    .empty-state p {
      font-size: 16px;
      color: #6b7280;
      margin-bottom: 0;
    }
    
    /* Loading State */
    .loading-state {
      text-align: center;
      padding: 60px 20px;
    }
    .loading-spinner {
      width: 50px;
      height: 50px;
      border: 4px solid #f3f3f3;
      border-top-color: #c8a97e;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 20px;
    }
    .loading-text {
      font-size: 16px;
      color: #6b7280;
      font-weight: 500;
    }
    
    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(50px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .rooms-hero {
        padding: 100px 0 60px;
        margin-bottom: 40px;
        background-attachment: scroll;
        min-height: 400px;
      }
      .rooms-hero h1 {
        font-size: 36px;
      }
      .rooms-main-content {
        grid-template-columns: 1fr;
        gap: 24px;
        margin-top: 40px;
      }
      .filter-section-modern {
        position: static;
        top: auto;
        max-height: none;
        padding: 24px;
        margin-bottom: 0;
      }
      .filter-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 16px;
      }
      .filter-grid {
        gap: 16px;
      }
      .filter-actions {
        width: 100%;
      }
      .filter-actions .btn-filter {
        width: 100%;
      }
      .rooms-grid {
        grid-template-columns: 1fr;
        gap: 24px;
      }
      .room-actions {
        grid-template-columns: 1fr;
      }
    }
    
    /* Promotions Section */
    .promotions-section {
      padding: 40px 0;
      background: linear-gradient(135deg, #f5ede0 0%, #fff8f0 50%, #ffffff 100%);
      position: relative;
      overflow: hidden;
    }
    .promotions-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      opacity: 0.05;
      background-image: repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(200,169,126,0.1) 10px, rgba(200,169,126,0.1) 20px);
      pointer-events: none;
    }
    .promotions-section .container {
      position: relative;
      z-index: 1;
    }
    .promotion-cards {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-top: 30px;
      max-width: 1200px;
      margin-left: auto;
      margin-right: auto;
    }
    .promotion-card {
      background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 3px 15px rgba(200,169,126,0.15);
      border: 2px solid rgba(200,169,126,0.1);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      display: flex;
      flex-direction: row;
      align-items: center;
      gap: 16px;
      min-height: 140px;
    }
    .promotion-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 6px 25px rgba(200,169,126,0.25);
      border-color: rgba(200,169,126,0.3);
    }
    .promotion-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, #c8a97e 0%, #f0d4a0 100%);
    }
    .promotion-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.12);
      border-color: #c8a97e;
    }
    .promotion-card.featured {
      background: linear-gradient(135deg, #c8a97e 0%, #d4b896 100%);
      color: #fff;
    }
    .promotion-card.featured::before {
      background: #fff;
    }
    .promotion-card-left {
      flex-shrink: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-width: 100px;
    }
    .promotion-card-right {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .promotion-card .badge {
      display: inline-block;
      background: #ff4757;
      color: #fff;
      padding: 3px 10px;
      border-radius: 12px;
      font-size: 10px;
      font-weight: 600;
      margin-bottom: 8px;
      text-transform: uppercase;
      align-self: flex-start;
    }
    .promotion-card.featured .badge {
      background: rgba(255,255,255,0.3);
    }
    .promotion-card h3 {
      font-size: 16px;
      font-weight: 700;
      margin-bottom: 6px;
      color: #1a1a1a;
      line-height: 1.3;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    .promotion-card.featured h3 {
      color: #fff;
    }
    .promotion-card .discount {
      font-size: 32px;
      font-weight: 700;
      color: #c8a97e;
      line-height: 1;
      margin: 0;
    }
    .promotion-card.featured .discount {
      color: #fff;
    }
    .promotion-card .code-box {
      background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
      border: 2px dashed #c8a97e;
      border-radius: 6px;
      padding: 10px;
      margin: 8px 0;
      text-align: center;
    }
    .promotion-card.featured .code-box {
      background: rgba(255,255,255,0.2);
      border-color: rgba(255,255,255,0.5);
    }
    .promotion-card .code {
      font-size: 16px;
      font-weight: 700;
      color: #c8a97e;
      letter-spacing: 1px;
      font-family: 'Courier New', monospace;
    }
    .promotion-card.featured .code {
      color: #fff;
    }
    .promotion-card .btn-copy {
      margin-top: 6px;
      padding: 4px 12px;
      background: #c8a97e;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
      transition: all 0.3s ease;
    }
    .promotion-card.featured .btn-copy {
      background: rgba(255,255,255,0.3);
    }
    .promotion-card .btn-copy:hover {
      background: #b89870;
    }
    .promotion-card.featured .btn-copy:hover {
      background: rgba(255,255,255,0.5);
    }
    .promotion-card p {
      color: #6b7280;
      font-size: 12px;
      line-height: 1.4;
      margin: 0;
    }
    .promotion-card.featured p {
      color: rgba(255,255,255,0.9);
    }
    .promotion-card .date-range {
      font-size: 11px;
      color: #6b7280;
      margin-top: 4px;
    }
    .promotion-card.featured .date-range {
      color: rgba(255,255,255,0.8);
    }
    
    /* FAQ Section */
    .faq-section {
      padding: 60px 0;
      background: #fff;
    }
    .faq-container {
      max-width: 800px;
      margin: 0 auto;
      margin-top: 40px;
    }
    .faq-item {
      background: #fff;
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      margin-bottom: 16px;
      overflow: hidden;
      transition: all 0.3s ease;
    }
    .faq-item:hover {
      border-color: #c8a97e;
      box-shadow: 0 4px 12px rgba(200,169,126,0.1);
    }
    .faq-item.active {
      border-color: #c8a97e;
    }
    .faq-question {
      padding: 20px 24px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-weight: 600;
      font-size: 16px;
      color: #1a1a1a;
      transition: all 0.3s ease;
    }
    .faq-question:hover {
      color: #c8a97e;
    }
    .faq-question::after {
      content: '+';
      font-size: 24px;
      font-weight: 300;
      color: #c8a97e;
      transition: transform 0.3s ease;
    }
    .faq-item.active .faq-question::after {
      transform: rotate(45deg);
    }
    .faq-answer {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease, padding 0.3s ease;
      padding: 0 24px;
    }
    .faq-item.active .faq-answer {
      max-height: 500px;
      padding: 0 24px 20px 24px;
    }
    .faq-answer p {
      color: #6b7280;
      font-size: 15px;
      line-height: 1.8;
      margin: 0;
    }
    
    /* Responsive for Promotions and FAQ */
    @media (max-width: 992px) {
      .promotion-cards {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    @media (max-width: 768px) {
      .promotion-cards {
        grid-template-columns: 1fr;
      }
      .promotion-card {
        flex-direction: column;
        text-align: center;
        min-height: auto;
        padding: 20px;
      }
      .promotion-card-left {
        min-width: auto;
      }
      .promotion-card .discount {
        font-size: 28px;
      }
      .faq-question {
        padding: 16px 20px;
        font-size: 15px;
      }
      .faq-answer {
        padding: 0 20px;
      }
      .faq-item.active .faq-answer {
        padding: 0 20px 16px 20px;
      }
    }
  </style>
  </head>
  <body>

  <!-- Header placeholder - will be loaded by load-header.js -->
  <div id="header-placeholder"></div>
  
  <!-- Load header component -->
  <script src="js/load-header.js"></script>

  <!-- Hero Section -->
  <section class="rooms-hero">
    	<div class="container">
      <div class="rooms-hero-content">
        <h1 style="color: #ffffff !important;">Kh√°m ph√° ph√≤ng ngh·ªâ</h1>
        <p style="color: #ffffff !important;">Tr·∫£i nghi·ªám kh√¥ng gian ngh·ªâ d∆∞·ª°ng ƒë·∫≥ng c·∫•p v·ªõi ƒë·∫ßy ƒë·ªß ti·ªán nghi hi·ªán ƒë·∫°i</p>
		    </div>
    	</div>
    </section>

  <!-- Introduction Section -->
  <section class="ftco-section bg-light" style="padding: 60px 0; background: linear-gradient(135deg, #e8dcc6 0%, #f5ede0 50%, #fff8f0 100%); position: relative; overflow: hidden;">
    <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; opacity: 0.05; background-image: repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(200,169,126,0.1) 10px, rgba(200,169,126,0.1) 20px);"></div>
    <div class="container" style="position: relative; z-index: 1;">
      <div class="row align-items-center">
        <div class="col-md-6 mb-4 mb-md-0">
          <div class="heading-section">
            <span class="subheading" style="color: #c8a97e; font-size: 14px; text-transform: uppercase; letter-spacing: 2px; display: block; margin-bottom: 10px;">Ph√≤ng ngh·ªâ cao c·∫•p</span>
            <h2 class="mb-4" style="font-size: 36px; font-weight: 700; color: #1a1a1a; line-height: 1.2;">Kh√¥ng gian ngh·ªâ d∆∞·ª°ng ƒë·∫≥ng c·∫•p</h2>
            <p style="font-size: 16px; line-height: 1.8; color: #6b7280; margin-bottom: 20px;">M·ªói ph√≤ng ngh·ªâ t·∫°i Resort Deluxe ƒë∆∞·ª£c thi·∫øt k·∫ø t·ªâ m·ªâ v·ªõi phong c√°ch hi·ªán ƒë·∫°i v√† sang tr·ªçng, mang ƒë·∫øn cho b·∫°n kh√¥ng gian th∆∞ gi√£n ho√†n h·∫£o sau nh·ªØng ho·∫°t ƒë·ªông trong ng√†y.</p>
            <p style="font-size: 16px; line-height: 1.8; color: #6b7280; margin-bottom: 20px;">T·ª´ ph√≤ng ti√™u chu·∫©n ƒë·∫øn suite cao c·∫•p, t·∫•t c·∫£ ƒë·ªÅu ƒë∆∞·ª£c trang b·ªã ƒë·∫ßy ƒë·ªß ti·ªán nghi hi·ªán ƒë·∫°i nh∆∞ wifi t·ªëc ƒë·ªô cao, TV m√†n h√¨nh l·ªõn, minibar, h·ªá th·ªëng ƒëi·ªÅu h√≤a v√† nhi·ªÅu d·ªãch v·ª• kh√°c.</p>
            <p style="font-size: 16px; line-height: 1.8; color: #6b7280; margin-bottom: 0;">H√£y s·ª≠ d·ª•ng b·ªô l·ªçc b√™n ph·∫£i ƒë·ªÉ t√¨m ph√≤ng ph√π h·ª£p nh·∫•t v·ªõi nhu c·∫ßu v√† ng√¢n s√°ch c·ªßa b·∫°n. Ch√∫ng t√¥i cam k·∫øt mang ƒë·∫øn tr·∫£i nghi·ªám ngh·ªâ d∆∞·ª°ng ƒë√°ng nh·ªõ nh·∫•t.</p>
          </div>
        </div>
        <div class="col-md-6">
          <div style="background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%); padding: 40px; border-radius: 20px; border: 2px solid rgba(200,169,126,0.15); box-shadow: 0 8px 30px rgba(200,169,126,0.15); border-left: 4px solid #c8a97e;">
            <h4 style="font-size: 20px; font-weight: 700; color: #1a1a1a; margin-bottom: 20px;">T·∫°i sao ch·ªçn ph√≤ng c·ªßa ch√∫ng t√¥i?</h4>
            <ul style="list-style: none; padding: 0; margin: 0;">
              <li style="display: flex; align-items: start; margin-bottom: 15px;">
                <span style="font-size: 24px; margin-right: 12px;">‚ú®</span>
                <div>
                  <strong style="color: #1a1a1a; font-size: 15px;">Ti·ªán nghi ƒë·∫ßy ƒë·ªß</strong>
                  <p style="color: #6b7280; font-size: 14px; margin: 5px 0 0 0;">M·ªçi ph√≤ng ƒë·ªÅu ƒë∆∞·ª£c trang b·ªã ƒë·∫ßy ƒë·ªß ti·ªán nghi hi·ªán ƒë·∫°i</p>
                </div>
              </li>
              <li style="display: flex; align-items: start; margin-bottom: 15px;">
                <span style="font-size: 24px; margin-right: 12px;">üåä</span>
                <div>
                  <strong style="color: #1a1a1a; font-size: 15px;">View ƒë·∫πp</strong>
                  <p style="color: #6b7280; font-size: 14px; margin: 5px 0 0 0;">Nhi·ªÅu ph√≤ng c√≥ view ra bi·ªÉn ho·∫∑c v∆∞·ªùn xanh</p>
                </div>
              </li>
              <li style="display: flex; align-items: start; margin-bottom: 15px;">
                <span style="font-size: 24px; margin-right: 12px;">üõèÔ∏è</span>
                <div>
                  <strong style="color: #1a1a1a; font-size: 15px;">Gi∆∞·ªùng ng·ªß tho·∫£i m√°i</strong>
                  <p style="color: #6b7280; font-size: 14px; margin: 5px 0 0 0;">N·ªám v√† chƒÉn ga g·ªëi ch·∫•t l∆∞·ª£ng cao</p>
                </div>
              </li>
              <li style="display: flex; align-items: start;">
                <span style="font-size: 24px; margin-right: 12px;">üöø</span>
                <div>
                  <strong style="color: #1a1a1a; font-size: 15px;">Ph√≤ng t·∫Øm sang tr·ªçng</strong>
                  <p style="color: #6b7280; font-size: 14px; margin: 5px 0 0 0;">Ph√≤ng t·∫Øm ri√™ng v·ªõi ƒë·∫ßy ƒë·ªß ƒë·ªì d√πng c√° nh√¢n</p>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <main class="container">
    <div class="rooms-main-content">
      <!-- Rooms List - Left Column -->
      <div class="rooms-content-area">
        <!-- Results Header with Sorting -->
        <div class="results-header">
          <div class="results-info">
            <span id="resultsCount" class="results-count">ƒêang t·∫£i...</span>
          </div>
          <div class="sort-options">
            <label for="sortBy">S·∫Øp x·∫øp:</label>
            <select id="sortBy" class="sort-select">
              <option value="default">M·∫∑c ƒë·ªãnh</option>
              <option value="price-asc">Gi√°: Th·∫•p ‚Üí Cao</option>
              <option value="price-desc">Gi√°: Cao ‚Üí Th·∫•p</option>
              <option value="name-asc">T√™n: A ‚Üí Z</option>
              <option value="name-desc">T√™n: Z ‚Üí A</option>
              <option value="size-desc">Di·ªán t√≠ch: L·ªõn ‚Üí Nh·ªè</option>
              <option value="size-asc">Di·ªán t√≠ch: Nh·ªè ‚Üí L·ªõn</option>
            </select>
          </div>
        </div>
        
        <div id="loading" class="loading-state" hidden>
          <div class="loading-spinner"></div>
          <p class="loading-text">ƒêang t·∫£i danh s√°ch ph√≤ng...</p>
        </div>
        
        <div id="roomsList" class="rooms-grid"></div>
      </div>
      
      <!-- Filter Section - Right Sidebar -->
      <aside class="filter-section-modern">
        <div class="filter-header">
          <h3>T√¨m ph√≤ng l√Ω t∆∞·ªüng</h3>
        </div>
        <div class="filter-grid">
          <div class="filter-group">
            <label for="checkin">üìÖ Ng√†y nh·∫≠n ph√≤ng</label>
            <input id="checkin" type="date" class="form-control" />
          </div>
          <div class="filter-group">
            <label for="checkout">üìÖ Ng√†y tr·∫£ ph√≤ng</label>
            <input id="checkout" type="date" class="form-control" />
          </div>
          <div class="filter-group">
            <label for="typeFilter">üè® Lo·∫°i ph√≤ng</label>
            <select id="typeFilter" class="form-select">
              <option value="">T·∫•t c·∫£ lo·∫°i ph√≤ng</option>
            </select>
          </div>
          <div class="filter-group">
            <label for="guestsFilter">üë• S·ªë kh√°ch</label>
            <select id="guestsFilter" class="form-select">
              <option value="">B·∫•t k·ª≥</option>
              <option value="1">1 kh√°ch</option>
              <option value="2">2 kh√°ch</option>
              <option value="3">3 kh√°ch</option>
              <option value="4">4 kh√°ch</option>
              <option value="5">5+ kh√°ch</option>
            </select>
          </div>
          <div class="filter-group">
            <label for="priceFilter">üí∞ M·ª©c gi√° (ƒë√™m)</label>
            <select id="priceFilter" class="form-select">
              <option value="">T·∫•t c·∫£</option>
              <option value="0-1000000">D∆∞·ªõi 1 tri·ªáu</option>
              <option value="1000000-2000000">1 - 2 tri·ªáu</option>
              <option value="2000000-3000000">2 - 3 tri·ªáu</option>
              <option value="3000000-5000000">3 - 5 tri·ªáu</option>
              <option value="5000000-999999999">Tr√™n 5 tri·ªáu</option>
            </select>
          </div>
          <div class="filter-group" style="border-top: 2px solid #e5e7eb; padding-top: 16px; margin-top: 8px;">
            <label for="couponCodeInput" style="font-weight: 600; color: #374151; font-size: 14px; margin-bottom: 10px; display: block;">üéüÔ∏è M√£ gi·∫£m gi√°</label>
            <div style="display: flex; gap: 8px; align-items: stretch; width: 100%;">
              <input type="text" id="couponCodeInput" class="form-control" placeholder="Nh·∫≠p m√£ (VD: SUMMER2024)" style="flex: 1; text-transform: uppercase; min-width: 0; height: 48px; font-size: 14px; padding: 12px 16px;" />
              <button type="button" id="applyCouponBtn" class="btn btn-sm" style="background: linear-gradient(135deg, #c8a97e 0%, #b89968 100%); color: #fff; border: none; padding: 12px 20px; border-radius: 8px; white-space: nowrap; font-weight: 600; cursor: pointer; height: 48px; min-width: 90px; display: flex; align-items: center; justify-content: center;">√Åp d·ª•ng</button>
            </div>
            <div id="couponMessage" class="small mt-2" style="min-height: 24px; color: #6b7280; font-size: 13px; line-height: 1.4; word-wrap: break-word;"></div>
            <div id="couponAppliedBadge" style="display: none; margin-top: 10px; padding: 10px 14px; background: #f0fdf4; border: 1px solid #86efac; border-radius: 8px; font-size: 13px; width: 100%; box-sizing: border-box;">
              <div style="display: flex; align-items: center; justify-content: space-between; gap: 8px;">
                <span>üéüÔ∏è M√£ ƒë√£ √°p d·ª•ng: <strong id="appliedCouponCode" style="color: #059669;">-</strong></span>
                <button type="button" onclick="clearAppliedCoupon()" style="background: none; border: none; color: #ef4444; cursor: pointer; font-size: 14px; padding: 4px 8px; font-weight: 600; white-space: nowrap;">‚úï X√≥a</button>
              </div>
            </div>
          </div>
          <div class="filter-actions">
            <button id="btnSearch" class="btn-filter btn-filter-primary">
              <i class="icon-bed"></i> T√¨m ph√≤ng
            </button>
            <button id="btnReset" class="btn-filter btn-filter-secondary">
              <i class="icon-refresh"></i> X√≥a l·ªçc
            </button>
          </div>
        </div>
      </aside>
    </div>
  </main>

  <!-- Promotions Section -->
  <section class="promotions-section" style="padding-top: 40px;">
    <div class="container">
      <div class="row justify-content-center mb-5">
        <div class="col-md-8 text-center">
          <span class="subheading" style="color: #c8a97e; font-size: 14px; text-transform: uppercase; letter-spacing: 2px; display: block; margin-bottom: 10px;">∆Øu ƒë√£i ƒë·∫∑c bi·ªát</span>
          <h2 class="mb-4" style="font-size: 36px; font-weight: 700; color: #1a1a1a;">Khuy·∫øn m√£i hi·ªán t·∫°i</h2>
          <p style="color: #6b7280; font-size: 16px;">T·∫≠n h∆∞·ªüng nh·ªØng ∆∞u ƒë√£i h·∫•p d·∫´n d√†nh ri√™ng cho b·∫°n</p>
        </div>
      </div>
      <div class="promotion-cards" id="promotionCards">
        <!-- Coupons will be loaded dynamically from API -->
        <div class="text-center py-5" id="loadingCoupons" style="color: #6b7280; min-height: 200px; display: flex; flex-direction: column; align-items: center; justify-content: center;">
          <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem; border-width: 0.3em;">
            <span class="visually-hidden">ƒêang t·∫£i...</span>
          </div>
          <p class="mt-3" style="font-size: 16px;">ƒêang t·∫£i m√£ gi·∫£m gi√°...</p>
        </div>
        <div id="noCouponsMessage" style="display: none;"></div>
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section class="faq-section">
    <div class="container">
      <div class="row justify-content-center mb-5">
        <div class="col-md-8 text-center">
          <span class="subheading" style="color: #c8a97e; font-size: 14px; text-transform: uppercase; letter-spacing: 2px; display: block; margin-bottom: 10px;">C√¢u h·ªèi th∆∞·ªùng g·∫∑p</span>
          <h2 class="mb-4" style="font-size: 36px; font-weight: 700; color: #1a1a1a;">B·∫°n c√≥ th·∫Øc m·∫Øc?</h2>
          <p style="color: #6b7280; font-size: 16px;">T√¨m c√¢u tr·∫£ l·ªùi cho c√°c c√¢u h·ªèi ph·ªï bi·∫øn nh·∫•t</p>
        </div>
      </div>
      <div class="faq-container">
        <div class="faq-item">
          <div class="faq-question">Gi·ªù check-in v√† check-out l√† khi n√†o?</div>
          <div class="faq-answer">
            <p>Gi·ªù check-in b·∫Øt ƒë·∫ßu t·ª´ 14:00 v√† check-out tr∆∞·ªõc 12:00. N·∫øu b·∫°n c·∫ßn check-in s·ªõm ho·∫∑c check-out mu·ªôn, vui l√≤ng li√™n h·ªá v·ªõi ch√∫ng t√¥i tr∆∞·ªõc ƒë·ªÉ ƒë∆∞·ª£c s·∫Øp x·∫øp (c√≥ th·ªÉ ph√°t sinh ph·ª• ph√≠ t√πy theo t√¨nh tr·∫°ng ph√≤ng).</p>
          </div>
        </div>
        
        <div class="faq-item">
          <div class="faq-question">Ch√≠nh s√°ch h·ªßy ph√≤ng nh∆∞ th·∫ø n√†o?</div>
          <div class="faq-answer">
            <p>B·∫°n c√≥ th·ªÉ h·ªßy ƒë·∫∑t ph√≤ng mi·ªÖn ph√≠ n·∫øu h·ªßy tr∆∞·ªõc 48 gi·ªù so v·ªõi gi·ªù check-in d·ª± ki·∫øn. N·∫øu h·ªßy trong v√≤ng 24-48 gi·ªù, ch√∫ng t√¥i s·∫Ω thu 50% gi√° tr·ªã ƒë·∫∑t ph√≤ng. H·ªßy trong v√≤ng 24 gi·ªù ho·∫∑c kh√¥ng ƒë·∫øn s·∫Ω kh√¥ng ƒë∆∞·ª£c ho√†n ti·ªÅn.</p>
          </div>
        </div>
        
        <div class="faq-item">
          <div class="faq-question">C√≥ ph·ª• ph√≠ g√¨ khi ƒë·∫∑t ph√≤ng kh√¥ng?</div>
          <div class="faq-answer">
            <p>Gi√° ph√≤ng ƒë√£ bao g·ªìm thu·∫ø VAT v√† ph√≠ d·ªãch v·ª•. C√°c ph·ª• ph√≠ c√≥ th·ªÉ ph√°t sinh bao g·ªìm: ph√≠ d·ªãch v·ª• ph√≤ng (room service), minibar, d·ªãch v·ª• gi·∫∑t ·ªßi, v√† c√°c d·ªãch v·ª• b·ªï sung kh√°c theo y√™u c·∫ßu. Vui l√≤ng xem chi ti·∫øt trong email x√°c nh·∫≠n ƒë·∫∑t ph√≤ng.</p>
          </div>
        </div>
        
        <div class="faq-item">
          <div class="faq-question">Tr·∫ª em c√≥ ƒë∆∞·ª£c mi·ªÖn ph√≠ kh√¥ng?</div>
          <div class="faq-answer">
            <p>Tr·∫ª em d∆∞·ªõi 5 tu·ªïi ƒë∆∞·ª£c ·ªü mi·ªÖn ph√≠ khi s·ª≠ d·ª•ng gi∆∞·ªùng c√≥ s·∫µn v√† kh√¥ng c·∫ßn th√™m gi∆∞·ªùng. Tr·∫ª em t·ª´ 5-12 tu·ªïi c√≥ th·ªÉ ·ªü c√πng gi∆∞·ªùng v·ªõi b·ªë m·∫π (mi·ªÖn ph√≠) ho·∫∑c y√™u c·∫ßu th√™m gi∆∞·ªùng ph·ª• (ph·ª• ph√≠ 300.000 VNƒê/ƒë√™m). Tr·∫ª em tr√™n 12 tu·ªïi ƒë∆∞·ª£c t√≠nh nh∆∞ ng∆∞·ªùi l·ªõn.</p>
          </div>
        </div>
        
        <div class="faq-item">
          <div class="faq-question">C√≥ th·ªÉ s·ª≠ d·ª•ng m√£ khuy·∫øn m√£i nh∆∞ th·∫ø n√†o?</div>
          <div class="faq-answer">
            <p>Khi ƒë·∫∑t ph√≤ng online, b·∫°n s·∫Ω th·∫•y tr∆∞·ªùng "M√£ khuy·∫øn m√£i" ·ªü b∆∞·ªõc thanh to√°n. Nh·∫≠p m√£ khuy·∫øn m√£i h·ª£p l·ªá v√† nh·∫•n "√Åp d·ª•ng". M√£ s·∫Ω t·ª± ƒë·ªông t√≠nh gi·∫£m gi√° v√†o t·ªïng ti·ªÅn. L∆∞u √Ω: m·ªói m√£ ch·ªâ c√≥ th·ªÉ s·ª≠ d·ª•ng m·ªôt l·∫ßn v√† c√≥ th·ªÉ c√≥ th·ªùi h·∫°n √°p d·ª•ng.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="ftco-footer ftco-bg-dark ftco-section mt-5">
      <div class="container">
        <div class="row mb-5">
          <div class="col-md">
            <div class="ftco-footer-widget mb-4">
            <h2 class="ftco-heading-2">RESORT DELUXE</h2>
            <p>Khu ngh·ªâ d∆∞·ª°ng cao c·∫•p v·ªõi ƒë·∫ßy ƒë·ªß ti·ªán nghi hi·ªán ƒë·∫°i, ph·ª•c v·ª• chu ƒë√°o v√† kh√¥ng gian tuy·ªát ƒë·∫πp.</p>
              <ul class="ftco-footer-social list-unstyled float-md-left float-lft mt-5">
                <li class="ftco-animate"><a href="#"><span class="icon-twitter"></span></a></li>
                <li class="ftco-animate"><a href="#"><span class="icon-facebook"></span></a></li>
                <li class="ftco-animate"><a href="#"><span class="icon-instagram"></span></a></li>
              </ul>
            </div>
          </div>
          <div class="col-md">
            <div class="ftco-footer-widget mb-4 ml-md-5">
            <h2 class="ftco-heading-2">Li√™n k·∫øt h·ªØu √≠ch</h2>
              <ul class="list-unstyled">
              <li><a href="blog.html" class="py-2 d-block">Blog</a></li>
              <li><a href="rooms.html" class="py-2 d-block">Ph√≤ng ngh·ªâ</a></li>
              <li><a href="restaurant.html" class="py-2 d-block">Nh√† h√†ng</a></li>
              <li><a href="about.html" class="py-2 d-block">Gi·ªõi thi·ªáu</a></li>
              </ul>
            </div>
          </div>
          <div class="col-md">
             <div class="ftco-footer-widget mb-4">
            <h2 class="ftco-heading-2">Th√¥ng tin</h2>
              <ul class="list-unstyled">
              <li><a href="about.html" class="py-2 d-block">V·ªÅ ch√∫ng t√¥i</a></li>
              <li><a href="contact.html" class="py-2 d-block">Li√™n h·ªá</a></li>
              <li><a href="#" class="py-2 d-block">D·ªãch v·ª•</a></li>
              <li><a href="#" class="py-2 d-block">Ch√≠nh s√°ch</a></li>
              </ul>
            </div>
          </div>
          <div class="col-md">
            <div class="ftco-footer-widget mb-4">
            <h2 class="ftco-heading-2">C√≥ c√¢u h·ªèi?</h2>
            	<div class="block-23 mb-3">
	              <ul>
                <li><span class="icon icon-map-marker"></span><span class="text">123 ƒê∆∞·ªùng Resort, Qu·∫≠n 1, TP. H·ªì Ch√≠ Minh</span></li>
                <li><a href="#"><span class="icon icon-phone"></span><span class="text">+84 28 1234 5678</span></a></li>
                <li><a href="#"><span class="icon icon-envelope"></span><span class="text">info@resortdeluxe.vn</span></a></li>
	              </ul>
	            </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12 text-center">
          <p>
            Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | RESORT DELUXE
          </p>
          </div>
        </div>
      </div>
    </footer>
    
  <!-- Scripts -->
  <script src="js/jquery.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="../js/api.js"></script>
  <script src="js/navbar-auth.js"></script>
  
  <!-- AI Chat Widget -->
  <script src="js/ai-chat.js"></script>
  <script src="js/coupons.js"></script>
  
  <script>
    let rooms = [];
  const API_ROOMS = location.origin + '/api/rooms';
    const API_TYPES = location.origin + '/api/room-types';

    function vnd(n) {
      try {
        return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(n || 0);
      } catch (_) {
        return (n || 0) + 'ƒë';
      }
    }

    function pickImage(room) {
      console.log('üñºÔ∏è [pickImage] Room data:', room);
      console.log('üñºÔ∏è [pickImage] Room keys:', Object.keys(room));
      
      // H√åNH ·∫¢NH ƒê·∫†I DI·ªÜN - ∆Øu ti√™n Room.ImageUrl (h√¨nh ri√™ng c·ªßa ph√≤ng)
      // Priority 1: Room.ImageUrl (h√¨nh ƒë·∫°i di·ªán ri√™ng c·ªßa ph√≤ng n√†y, do admin upload)
      const roomImageUrl = room.imageUrl || room.ImageUrl;
      if (roomImageUrl && typeof roomImageUrl === 'string' && roomImageUrl.trim().length > 0) {
        console.log('‚úÖ [pickImage] Found Room.ImageUrl (h√¨nh ƒë·∫°i di·ªán ri√™ng):', roomImageUrl);
        return formatImageUrl(roomImageUrl);
      }
      
      // Priority 2: RoomTypeImageUrl from API (from RoomTypeNavigation.MainImageUrl)
      // Handle both camelCase and PascalCase (C# default)
      const roomTypeImageUrl = room.roomTypeImageUrl || room.RoomTypeImageUrl;
      if (roomTypeImageUrl && typeof roomTypeImageUrl === 'string' && roomTypeImageUrl.trim().length > 0) {
        console.log('‚úÖ [pickImage] Found RoomTypeImageUrl:', roomTypeImageUrl);
        return formatImageUrl(roomTypeImageUrl);
      }
      
      // Priority 3: Try other image fields from API
      const fields = [
        room.image, 
        room.thumbnailUrl, 
        room.thumbnail, 
        room.photoUrl,
        room.roomImageUrl,
        room.roomImage
      ];
      const found = fields.find(u => typeof u === 'string' && u.trim().length > 0);
      if (found) {
        console.log('‚úÖ [pickImage] Found in other fields:', found);
        return formatImageUrl(found);
      }
      
      // Priority 4: Try to parse Room.ImageGallery (l·∫•y ·∫£nh ƒë·∫ßu ti√™n n·∫øu c√≥)
      const roomImageGallery = room.imageGallery || room.ImageGallery;
      if (roomImageGallery && typeof roomImageGallery === 'string') {
        try {
          const gallery = JSON.parse(roomImageGallery);
          if (Array.isArray(gallery) && gallery.length > 0 && gallery[0]) {
            console.log('‚úÖ [pickImage] Found in Room.ImageGallery (first image):', gallery[0]);
            return formatImageUrl(gallery[0]);
          }
        } catch (e) {
          console.warn('‚ö†Ô∏è [pickImage] Error parsing Room.ImageGallery:', e);
        }
      }
      
      // Priority 5: Try RoomTypeImageGallery
      const roomTypeImageGallery = room.roomTypeImageGallery || room.RoomTypeImageGallery;
      if (roomTypeImageGallery && typeof roomTypeImageGallery === 'string') {
        try {
          const gallery = JSON.parse(roomTypeImageGallery);
          if (Array.isArray(gallery) && gallery.length > 0 && gallery[0]) {
            console.log('‚úÖ [pickImage] Found in RoomTypeImageGallery (first image):', gallery[0]);
            return formatImageUrl(gallery[0]);
          }
        } catch (e) {
          console.warn('‚ö†Ô∏è [pickImage] Error parsing RoomTypeImageGallery:', e);
        }
      }
      
      // Fallback to default image based on roomId
      const idx = Math.max(1, (room.roomId || 1) % 6);
      const fallbackUrl = `images/room-${idx}.jpg`;
      console.log('‚ö†Ô∏è [pickImage] Using fallback:', fallbackUrl);
      return fallbackUrl;
    }
    
    function formatImageUrl(url) {
      if (!url || typeof url !== 'string') return null;
      url = url.trim();
      if (url.length === 0) return null;
      
      // If it's already a full URL, return as is
      if (url.startsWith('http://') || url.startsWith('https://')) {
        return url;
      }
      
      // If it starts with /, it's an absolute path from root
      if (url.startsWith('/')) {
        return url;
      }
      
      // Otherwise, treat as relative to images/ folder
      return url.startsWith('images/') ? url : `images/${url}`;
    }

    function renderRooms(list) {
      console.log('üé® [renderRooms] Rendering:', list.length, 'rooms');
      const wrap = document.getElementById('roomsList');
      if (!wrap) {
        console.error('‚ùå [renderRooms] roomsList element not found');
        return;
      }
      wrap.innerHTML = '';
      wrap.className = 'rooms-grid';
      
      if (!Array.isArray(list) || list.length === 0) {
        console.warn('‚ö†Ô∏è [renderRooms] Empty list or not an array');
        wrap.innerHTML = `
          <div class="col-12">
            <div class="empty-state">
              <div class="empty-state-icon">üè®</div>
              <h3>Kh√¥ng t√¨m th·∫•y ph√≤ng ph√π h·ª£p</h3>
              <p>Vui l√≤ng th·ª≠ l·∫°i v·ªõi b·ªô l·ªçc kh√°c ho·∫∑c li√™n h·ªá v·ªõi ch√∫ng t√¥i</p>
            </div>
          </div>
        `;
        return;
      }
      
      list.forEach((r, index) => {
        const price = r.pricePerNight ?? r.basePrice ?? 0;
        const name = r.roomTypeName || r.roomType || 'Ph√≤ng ngh·ªâ';
        const imgUrl = pickImage(r);
        const available = (r.isAvailable !== false);
        const roomNumber = r.roomNumber ? `Ph√≤ng ${r.roomNumber}` : name;
        const maxOccupancy = r.maxOccupancy ?? '-';
        const roomSize = (r.roomTypeRoomSize || r.RoomTypeRoomSize) ?? r.roomSize ?? '-';
        
        console.log(`üñºÔ∏è [renderRooms] Room ${r.roomId}: imgUrl = ${imgUrl}, RoomTypeImageUrl = ${r.roomTypeImageUrl || r.RoomTypeImageUrl || 'undefined'}`);
        
        const card = document.createElement('div');
        card.className = 'room-card-modern';
        card.style.animationDelay = `${index * 0.1}s`;
        card.onclick = () => {
          window.location.href = `room-detail.html?id=${r.roomId}`;
        };
        
        card.innerHTML = `
          <div class="room-image-wrapper">
            <img src="${imgUrl}" alt="${name}" loading="lazy" 
                 onerror="this.onerror=null; this.src='images/room-${Math.max(1, (r.roomId || 1) % 6)}.jpg'; this.style.display='block';" 
                 onload="this.style.display='block';" />
            <div class="room-image-overlay"></div>
            <span class="room-badge-top">${roomNumber}</span>
            <span class="room-badge-status ${available ? 'room-badge-available' : 'room-badge-unavailable'}">
              ${available ? '‚úì C√≤n ph√≤ng' : '‚úó H·∫øt ph√≤ng'}
            </span>
          </div>
          <div class="room-card-body">
            <div class="room-rating">
              ${'<i class="icon-star"></i>'.repeat(5)}
            </div>
            <h3 class="room-title">${name}</h3>
            <div class="room-price">
              <span class="room-price-amount">${vnd(price)}</span>
              <span class="room-price-unit">/ ƒë√™m</span>
            </div>
            <div class="room-features">
              <div class="room-feature">
                <i class="icon-users"></i>
                <span>${maxOccupancy} kh√°ch</span>
              </div>
              ${roomSize !== '-' ? `
              <div class="room-feature">
                <i class="icon-expand"></i>
                <span>${roomSize}m¬≤</span>
              </div>
              ` : ''}
            </div>
            <div class="room-actions">
              <a href="room-detail.html?id=${r.roomId}" class="btn-room-action btn-room-secondary" onclick="event.stopPropagation();">
                <i class="icon-eye"></i> Chi ti·∫øt
              </a>
              <button class="btn-room-action btn-room-primary" 
                      onclick="event.stopPropagation();bookNow(${r.roomId})" 
                      ${available ? '' : 'disabled'}>
                <i class="icon-calendar"></i> ƒê·∫∑t ngay
              </button>
            </div>
          </div>
        `;
        
        wrap.appendChild(card);
      });
      
      // Re-observe cards for animation
      setTimeout(() => {
        document.querySelectorAll('.room-card-modern').forEach(card => {
          if (!card.classList.contains('animated')) {
            card.classList.add('animated');
          }
        });
      }, 100);
    }

    async function loadRoomTypes() {
      try {
        const url = API_TYPES + '?_=' + Date.now();
        console.log('üîµ [loadRoomTypes] Fetching:', url);
        const resp = await fetch(url, { cache: 'no-store' });
        console.log('üîµ [loadRoomTypes] Response status:', resp.status);
        if (!resp.ok) throw new Error('HTTP ' + resp.status);
        const data = await resp.json();
        console.log('‚úÖ [loadRoomTypes] Data received:', data);
        const sel = document.getElementById('typeFilter');
        if (!sel) {
          console.error('‚ùå [loadRoomTypes] typeFilter element not found');
          return;
        }
        data.forEach(t => {
          const op = document.createElement('option');
          op.value = t.roomTypeId;
          op.textContent = t.typeName;
          sel.appendChild(op);
        });
        console.log('‚úÖ [loadRoomTypes] Options added:', data.length);
      } catch (e) {
        console.error('‚ùå [loadRoomTypes] Error:', e);
        if (typeof showToast === 'function') {
          showToast('L·ªói t·∫£i lo·∫°i ph√≤ng: ' + e.message, 'warning');
        }
      }
    }

    // Validation function
    function validateSearchForm() {
      const checkin = document.getElementById('checkin')?.value;
      const checkout = document.getElementById('checkout')?.value;
      const guestsFilter = document.getElementById('guestsFilter')?.value;
      
      // Clear previous errors
      const errorElements = document.querySelectorAll('.filter-error');
      errorElements.forEach(el => el.remove());
      
      let hasError = false;
      
      // Validate checkin date
      if (checkin) {
        const checkinDate = new Date(checkin);
        const today = new Date();
        today.setHours(0, 0, 0, 0);
        checkinDate.setHours(0, 0, 0, 0);
        
        if (checkinDate < today) {
          showFieldError('checkin', 'Ng√†y nh·∫≠n ph√≤ng kh√¥ng ƒë∆∞·ª£c trong qu√° kh·ª©');
          hasError = true;
        }
      }
      
      // Validate checkout date
      if (checkout) {
        const checkoutDate = new Date(checkout);
        checkoutDate.setHours(0, 0, 0, 0);
        
        if (checkin) {
          const checkinDate = new Date(checkin);
          checkinDate.setHours(0, 0, 0, 0);
          
          if (checkoutDate <= checkinDate) {
            showFieldError('checkout', 'Ng√†y tr·∫£ ph√≤ng ph·∫£i sau ng√†y nh·∫≠n ph√≤ng');
            hasError = true;
          }
        } else {
          const today = new Date();
          today.setHours(0, 0, 0, 0);
          
          if (checkoutDate < today) {
            showFieldError('checkout', 'Ng√†y tr·∫£ ph√≤ng kh√¥ng ƒë∆∞·ª£c trong qu√° kh·ª©');
            hasError = true;
          }
        }
      }
      
      // Validate guests
      if (guestsFilter) {
        const numGuests = parseInt(guestsFilter);
        if (isNaN(numGuests) || numGuests < 1 || numGuests > 20) {
          showFieldError('guestsFilter', 'S·ªë kh√°ch ph·∫£i t·ª´ 1 ƒë·∫øn 20');
          hasError = true;
        }
      }
      
      return !hasError;
    }
    
    function showFieldError(fieldId, message) {
      const field = document.getElementById(fieldId);
      if (!field) return;
      
      const errorDiv = document.createElement('div');
      errorDiv.className = 'filter-error';
      errorDiv.style.cssText = 'color: #dc3545; font-size: 12px; margin-top: 4px; padding: 4px 8px; background: #fff5f5; border-radius: 4px;';
      errorDiv.textContent = message;
      
      field.parentElement.appendChild(errorDiv);
      field.style.borderColor = '#dc3545';
      
      // Remove error after 5 seconds
      setTimeout(() => {
        errorDiv.remove();
        field.style.borderColor = '';
      }, 5000);
    }

    async function loadRooms() {
      // Validate form before searching
      if (!validateSearchForm()) {
        if (typeof showToast === 'function') {
          showToast('Vui l√≤ng ki·ªÉm tra l·∫°i th√¥ng tin t√¨m ki·∫øm', 'error');
        } else {
          alert('Vui l√≤ng ki·ªÉm tra l·∫°i th√¥ng tin t√¨m ki·∫øm');
        }
        return;
      }
      
      const loading = document.getElementById('loading');
      const roomsList = document.getElementById('roomsList');
      
      // Clear old data
      if (roomsList) {
        roomsList.innerHTML = '';
        roomsList.className = 'rooms-grid';
        console.log('üóëÔ∏è [loadRooms] Cleared old room data');
      }
      rooms = [];
      
      try {
        loading.hidden = false;
        loading.textContent = 'ƒêang t·∫£i danh s√°ch ph√≤ng...';
        
        const typeId = document.getElementById('typeFilter')?.value || '';
        const qs = new URLSearchParams();
        qs.set('isAvailable', 'true');
        qs.set('_', Date.now());
        if (typeId) qs.set('roomTypeId', typeId);
        
        const url = API_ROOMS + '?' + qs.toString();
        console.log('üîµ [loadRooms] Fetching:', url);
        
        const resp = await fetch(url, { cache: 'no-store' });
        console.log('üîµ [loadRooms] Response status:', resp.status, resp.statusText);
        
        if (!resp.ok) {
          const errorText = await resp.text();
          console.error('‚ùå [loadRooms] API Error:', errorText);
          throw new Error('HTTP ' + resp.status + ': ' + errorText);
        }
        
      const data = await resp.json();
        console.log('‚úÖ [loadRooms] Data received:', data);
        console.log('‚úÖ [loadRooms] Is array:', Array.isArray(data));
        
        let allRooms = Array.isArray(data) ? data : (Array.isArray(data?.items) ? data.items : []);
        console.log('‚úÖ [loadRooms] Rooms array length:', allRooms.length);
        
        if (allRooms.length > 0) {
          console.log('‚úÖ [loadRooms] First room:', allRooms[0]);
        }
        
        // Store all rooms for filtering/sorting
        rooms = allRooms;
        
        // Apply filters and sorting
        let filteredRooms = applyFilters(allRooms);
        filteredRooms = applySorting(filteredRooms);
        
        // Update results count
        updateResultsCount(filteredRooms.length);
        
        renderRooms(filteredRooms);
      } catch (e) {
        console.error('‚ùå [loadRooms] Error:', e);
        if (typeof showToast === 'function') {
          showToast('L·ªói t·∫£i ph√≤ng: ' + e.message, 'danger');
        } else {
          alert('L·ªói t·∫£i ph√≤ng: ' + e.message);
        }
        
        const roomsList = document.getElementById('roomsList');
        if (roomsList) {
          roomsList.innerHTML = `
            <div class="col-12">
              <div class="empty-state">
                <div class="empty-state-icon">‚ö†Ô∏è</div>
                <h3>Kh√¥ng th·ªÉ t·∫£i danh s√°ch ph√≤ng</h3>
                <p>Vui l√≤ng th·ª≠ l·∫°i sau ho·∫∑c li√™n h·ªá v·ªõi ch√∫ng t√¥i</p>
              </div>
            </div>
          `;
        }
    } finally {
        loading.hidden = true;
      }
    }

    // Filter and Sort Functions
    function applyFilters(roomList) {
      let filtered = [...roomList];
      
      // Filter by room type (already handled in API query, but keeping for client-side consistency)
      const typeId = document.getElementById('typeFilter')?.value || '';
      if (typeId) {
        filtered = filtered.filter(r => r.roomTypeId == typeId);
      }
      
      // Filter by guests
      const guestsFilter = document.getElementById('guestsFilter')?.value || '';
      if (guestsFilter) {
        const minGuests = parseInt(guestsFilter);
        if (minGuests === 5) {
          filtered = filtered.filter(r => (r.maxOccupancy || 0) >= 5);
        } else {
          filtered = filtered.filter(r => (r.maxOccupancy || 0) >= minGuests && (r.maxOccupancy || 0) < minGuests + 1);
        }
      }
      
      // Filter by price range
      const priceFilter = document.getElementById('priceFilter')?.value || '';
      if (priceFilter) {
        const [minPrice, maxPrice] = priceFilter.split('-').map(p => parseInt(p));
        filtered = filtered.filter(r => {
          const price = r.pricePerNight ?? r.basePrice ?? 0;
          return price >= minPrice && price <= maxPrice;
        });
      }
      
      return filtered;
    }
    
    function applySorting(roomList) {
      const sortBy = document.getElementById('sortBy')?.value || 'default';
      const sorted = [...roomList];
      
      switch (sortBy) {
        case 'price-asc':
          sorted.sort((a, b) => {
            const priceA = a.pricePerNight ?? a.basePrice ?? 0;
            const priceB = b.pricePerNight ?? b.basePrice ?? 0;
            return priceA - priceB;
          });
          break;
        case 'price-desc':
          sorted.sort((a, b) => {
            const priceA = a.pricePerNight ?? a.basePrice ?? 0;
            const priceB = b.pricePerNight ?? b.basePrice ?? 0;
            return priceB - priceA;
          });
          break;
        case 'name-asc':
          sorted.sort((a, b) => {
            const nameA = (a.roomTypeName || a.roomType || '').toLowerCase();
            const nameB = (b.roomTypeName || b.roomType || '').toLowerCase();
            return nameA.localeCompare(nameB);
          });
          break;
        case 'name-desc':
          sorted.sort((a, b) => {
            const nameA = (a.roomTypeName || a.roomType || '').toLowerCase();
            const nameB = (b.roomTypeName || b.roomType || '').toLowerCase();
            return nameB.localeCompare(nameA);
          });
          break;
        case 'size-desc':
          sorted.sort((a, b) => {
            const sizeA = parseFloat(a.roomTypeRoomSize || a.RoomTypeRoomSize || a.roomSize || 0);
            const sizeB = parseFloat(b.roomTypeRoomSize || b.RoomTypeRoomSize || b.roomSize || 0);
            return sizeB - sizeA;
          });
          break;
        case 'size-asc':
          sorted.sort((a, b) => {
            const sizeA = parseFloat(a.roomTypeRoomSize || a.RoomTypeRoomSize || a.roomSize || 0);
            const sizeB = parseFloat(b.roomTypeRoomSize || b.RoomTypeRoomSize || b.roomSize || 0);
            return sizeA - sizeB;
          });
          break;
        default:
          // Keep original order
          break;
      }
      
      return sorted;
    }
    
    function updateResultsCount(count) {
      const resultsCountEl = document.getElementById('resultsCount');
      if (resultsCountEl) {
        if (count === 0) {
          resultsCountEl.textContent = 'Kh√¥ng t√¨m th·∫•y ph√≤ng n√†o';
        } else if (count === 1) {
          resultsCountEl.textContent = 'T√¨m th·∫•y 1 ph√≤ng';
        } else {
          resultsCountEl.textContent = `T√¨m th·∫•y ${count} ph√≤ng`;
        }
      }
    }

    function bookNow(id) {
      // Ki·ªÉm tra authentication tr∆∞·ªõc khi ƒë·∫∑t ph√≤ng
      const token = localStorage.getItem('token');
      const userStr = localStorage.getItem('user');
      
      if (!token || !userStr) {
        if (typeof showToast === 'function') {
          showToast('Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ ƒë·∫∑t ph√≤ng', 'warning');
        } else {
          alert('Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ ƒë·∫∑t ph√≤ng');
        }
        // L∆∞u URL hi·ªán t·∫°i ƒë·ªÉ redirect l·∫°i sau khi login
        const currentUrl = window.location.href;
        setTimeout(() => {
          window.location.href = `login.html?redirect=${encodeURIComponent(currentUrl)}`;
        }, 1500);
        return;
      }
      
      // Ki·ªÉm tra user object h·ª£p l·ªá
      try {
        const user = JSON.parse(userStr);
        if (!user || !user.customerId) {
          throw new Error('Invalid user data');
        }
      } catch (e) {
        if (typeof showToast === 'function') {
          showToast('Th√¥ng tin ng∆∞·ªùi d√πng kh√¥ng h·ª£p l·ªá. Vui l√≤ng ƒëƒÉng nh·∫≠p l·∫°i', 'danger');
        } else {
          alert('Th√¥ng tin ng∆∞·ªùi d√πng kh√¥ng h·ª£p l·ªá. Vui l√≤ng ƒëƒÉng nh·∫≠p l·∫°i');
        }
        setTimeout(() => {
          window.location.href = 'login.html';
        }, 1500);
        return;
      }
      
      // ƒê√£ ƒëƒÉng nh·∫≠p, cho ph√©p ƒë·∫∑t ph√≤ng
      window.location.href = 'room-detail.html?id=' + encodeURIComponent(id);
    }

    // Event Listeners
    document.getElementById('btnSearch').addEventListener('click', loadRooms);
    document.getElementById('btnReset').addEventListener('click', () => {
      document.getElementById('typeFilter').value = '';
      document.getElementById('checkin').value = '';
      document.getElementById('checkout').value = '';
      document.getElementById('guestsFilter').value = '';
      document.getElementById('priceFilter').value = '';
      document.getElementById('sortBy').value = 'default';
      loadRooms();
    });
    
    // Sort change handler
    document.getElementById('sortBy')?.addEventListener('change', () => {
      if (rooms.length > 0) {
        let filteredRooms = applyFilters(rooms);
        filteredRooms = applySorting(filteredRooms);
        renderRooms(filteredRooms);
        updateResultsCount(filteredRooms.length);
      }
    });
    
    // Filter change handlers (auto-apply on change)
    ['guestsFilter', 'priceFilter'].forEach(filterId => {
      const filterEl = document.getElementById(filterId);
      if (filterEl) {
        filterEl.addEventListener('change', () => {
          if (rooms.length > 0) {
            let filteredRooms = applyFilters(rooms);
            filteredRooms = applySorting(filteredRooms);
            renderRooms(filteredRooms);
            updateResultsCount(filteredRooms.length);
          }
        });
      }
    });

    // Navbar scroll effect
    window.addEventListener('scroll', () => {
      const navbar = document.querySelector('.ftco-navbar');
      if (window.scrollY > 50) {
        navbar?.classList.add('scrolled');
      } else {
        navbar?.classList.remove('scrolled');
      }
    });

    // Helper functions for coupons - must be defined BEFORE loadActiveCoupons
    function formatDiscountAmount(amount) {
      // Format amount in VND
      try {
        return new Intl.NumberFormat('vi-VN', { 
          style: 'currency', 
          currency: 'VND',
          maximumFractionDigits: 0
        }).format(amount || 0);
      } catch (_) {
        return (amount || 0).toLocaleString('vi-VN') + 'ƒë';
      }
    }

    function formatDate(dateStr) {
      try {
        const date = new Date(dateStr);
        return date.toLocaleDateString('vi-VN', { 
          day: '2-digit', 
          month: '2-digit', 
          year: 'numeric' 
        });
      } catch (_) {
        return dateStr || '';
      }
    }

    function getCouponDescription(coupon) {
      if (coupon.description && coupon.description.length > 100) {
        return coupon.description.substring(0, 100) + '...';
      }
      if (coupon.description) {
        return coupon.description;
      }
      
      // Default description based on type
      if (coupon.type === 'percent') {
        return `Gi·∫£m ${coupon.value}% cho ƒë∆°n h√†ng c·ªßa b·∫°n`;
      } else {
        return `Gi·∫£m ${formatDiscountAmount(coupon.value)} cho ƒë∆°n h√†ng c·ªßa b·∫°n`;
      }
    }

    function renderCoupons(coupons) {
      console.log('üé® [renderCoupons] Starting to render:', coupons);
      const container = document.getElementById('promotionCards');
      if (!container) {
        console.error('‚ùå [renderCoupons] Container not found!');
        return;
      }
      
      // Clear container
      container.innerHTML = '';
      
      if (!coupons || !Array.isArray(coupons) || coupons.length === 0) {
        console.warn('‚ö†Ô∏è [renderCoupons] No coupons to render');
        return;
      }
      
      console.log('üé® [renderCoupons] Rendering', coupons.length, 'coupons');
      
      coupons.forEach((coupon, index) => {
        try {
          const isFirst = index === 0;
          const badgeText = isFirst ? 'N·ªïi b·∫≠t' : (index === 1 ? 'M·ªõi' : 'ƒê·ªôc quy·ªÅn');
          
          // Validate coupon data
          if (!coupon.code) {
            console.warn('‚ö†Ô∏è [renderCoupons] Coupon missing code:', coupon);
            return;
          }
          
          // Format discount display
          let discountDisplay = '';
          const couponType = (coupon.type || '').toLowerCase();
          const couponValue = parseFloat(coupon.value) || 0;
          
          if (couponType === 'percent') {
            discountDisplay = `${Math.round(couponValue)}%`;
          } else {
            discountDisplay = formatDiscountAmount(couponValue);
          }
          
          // Format dates
          const startDate = formatDate(coupon.startDate);
          const endDate = formatDate(coupon.endDate);
          
          // Description or default text
          const description = coupon.description || 'M√£ gi·∫£m gi√° ƒë·∫∑c bi·ªát';
          
          // Escape HTML to prevent XSS
          const escapeHtml = (text) => {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
          };
          
          const cardHtml = `
            <div class="promotion-card ${isFirst ? 'featured' : ''}">
              <div class="promotion-card-left">
                <div class="discount">${escapeHtml(discountDisplay)}</div>
              </div>
              <div class="promotion-card-right">
                <span class="badge">${escapeHtml(badgeText)}</span>
                <h3>${escapeHtml(description)}</h3>
                <div class="code-box">
                  <div style="font-size: 11px; margin-bottom: 4px; ${isFirst ? 'opacity: 0.9;' : 'color: #6b7280;'}">M√£ khuy·∫øn m√£i:</div>
                  <div class="code">${escapeHtml(coupon.code)}</div>
                  <button class="btn-copy" onclick="copyCode('${escapeHtml(coupon.code)}', this)">Sao ch√©p</button>
                </div>
                <p class="date-range">* √Åp d·ª•ng t·ª´ ${escapeHtml(startDate)} - ${escapeHtml(endDate)}</p>
              </div>
            </div>
          `;
          
          container.insertAdjacentHTML('beforeend', cardHtml);
          console.log('‚úÖ [renderCoupons] Rendered coupon:', coupon.code);
        } catch (error) {
          console.error('‚ùå [renderCoupons] Error rendering coupon:', error, coupon);
        }
      });
      
      console.log('‚úÖ [renderCoupons] Finished rendering', coupons.length, 'coupons');
    }

    // Load active coupons from API - define BEFORE initialization
    window.loadActiveCoupons = async function() {
      console.log('üîÑ [loadActiveCoupons] Starting to load coupons...');
      const loadingEl = document.getElementById('loadingCoupons');
      const noCouponsEl = document.getElementById('noCouponsMessage');
      const cardsContainer = document.getElementById('promotionCards');
      
      try {
        const url = `${location.origin}/api/coupons/active?_=${Date.now()}`;
        console.log('üîÑ [loadActiveCoupons] Fetching from:', url);
        
        const response = await fetch(url, {
          cache: 'no-store',
          headers: {
            'Accept': 'application/json'
          }
        });
        
        console.log('üîÑ [loadActiveCoupons] Response status:', response.status, response.statusText);
        
        if (!response.ok) {
          const errorText = await response.text().catch(() => '');
          console.error('‚ùå [loadActiveCoupons] HTTP Error:', response.status, errorText);
          throw new Error(`HTTP ${response.status}: ${errorText || response.statusText}`);
        }
        
        const coupons = await response.json();
        console.log('‚úÖ [loadActiveCoupons] Received coupons:', coupons);
        console.log('üìä [loadActiveCoupons] Coupons count:', coupons ? coupons.length : 0);
        
        // Hide loading
        if (loadingEl) loadingEl.style.display = 'none';
        
        if (!coupons || !Array.isArray(coupons) || coupons.length === 0) {
          console.log('‚ÑπÔ∏è [loadActiveCoupons] No coupons found');
          if (noCouponsEl) {
            noCouponsEl.innerHTML = `
              <div style="text-align: center; padding: 40px; color: #6b7280;">
                <span style="font-size: 48px; opacity: 0.5; display: block; margin-bottom: 12px;">üéüÔ∏è</span>
                <p style="font-size: 16px; font-weight: 500; margin-bottom: 8px;">Hi·ªán t·∫°i ch∆∞a c√≥ m√£ gi·∫£m gi√° n√†o</p>
                <p style="font-size: 14px; opacity: 0.7;">Vui l√≤ng quay l·∫°i sau ƒë·ªÉ xem c√°c ∆∞u ƒë√£i m·ªõi nh·∫•t.</p>
              </div>
            `;
            noCouponsEl.style.display = 'block';
          }
          return;
        }
        
        // Hide no coupons message
        if (noCouponsEl) noCouponsEl.style.display = 'none';
        
        // Limit to 3 coupons for display
        const displayCoupons = coupons.slice(0, 3);
        
        // Render coupons
        console.log('üé® [loadActiveCoupons] Rendering coupons...');
        renderCoupons(displayCoupons);
        
      } catch (error) {
        console.error('‚ùå [loadActiveCoupons] Error:', error);
        if (loadingEl) loadingEl.style.display = 'none';
        if (noCouponsEl) {
          noCouponsEl.innerHTML = `
            <div style="text-align: center; padding: 40px; color: #6b7280;">
              <span style="font-size: 48px; opacity: 0.5; display: block; margin-bottom: 12px;">‚ö†Ô∏è</span>
              <p style="font-size: 16px; font-weight: 500; margin-bottom: 8px;">Kh√¥ng th·ªÉ t·∫£i m√£ gi·∫£m gi√°</p>
              <p style="font-size: 14px; opacity: 0.7;">${error.message || 'Vui l√≤ng th·ª≠ l·∫°i sau.'}</p>
              <button onclick="loadActiveCoupons()" class="btn btn-sm btn-primary mt-3" style="padding: 8px 16px; border-radius: 4px; border: none; cursor: pointer;">Th·ª≠ l·∫°i</button>
            </div>
          `;
          noCouponsEl.style.display = 'block';
        }
      }
    };

    // Initialize
    (function() {
      // Clear old data on page load
      const roomsList = document.getElementById('roomsList');
      if (roomsList) {
        roomsList.innerHTML = '';
        console.log('üóëÔ∏è [Page Load] Cleared old room data on page load');
      }
      rooms = [];
      
      loadRoomTypes();
      loadRooms();
      
      // Load coupons from API
      if (typeof loadActiveCoupons === 'function') {
        console.log('üîÑ [Init] Calling loadActiveCoupons...');
        loadActiveCoupons();
      } else {
        console.error('‚ùå [Init] loadActiveCoupons function not found!');
      }
      
      // Auto-refresh every 60 seconds
      setInterval(loadRooms, 60000);
      setInterval(() => {
        if (typeof loadActiveCoupons === 'function') {
          loadActiveCoupons();
        }
      }, 300000); // Refresh coupons every 5 minutes
      
      // Handle pageshow event for browser back/forward
      window.addEventListener('pageshow', (event) => {
        if (event.persisted) {
          console.log('üîÑ [PageShow] Page loaded from cache, reloading rooms...');
      loadRooms();
        }
      });
      
    })();
</script>

<script>
  // Copy promotion code function - make it global
  window.copyCode = function(code, button) {
    navigator.clipboard.writeText(code).then(function() {
      const originalText = button.textContent;
      button.textContent = 'ƒê√£ sao ch√©p!';
      button.style.background = '#28a745';
      setTimeout(function() {
        button.textContent = originalText;
        button.style.background = '';
      }, 2000);
      // Auto-fill coupon input if exists
      const couponInput = document.getElementById('couponCodeInput');
      if (couponInput) {
        couponInput.value = code;
      }
    }).catch(function(err) {
      console.error('Failed to copy code:', err);
      alert('Kh√¥ng th·ªÉ sao ch√©p m√£. Vui l√≤ng sao ch√©p th·ªß c√¥ng: ' + code);
    });
  }

  // Clear applied coupon
  window.clearAppliedCoupon = function() {
    try {
      localStorage.removeItem('appliedCoupon');
      const couponInput = document.getElementById('couponCodeInput');
      const couponMsg = document.getElementById('couponMessage');
      const badge = document.getElementById('couponAppliedBadge');
      if (couponInput) couponInput.value = '';
      if (couponMsg) {
        couponMsg.textContent = '';
        couponMsg.style.color = '#6b7280';
      }
      if (badge) badge.style.display = 'none';
      console.log('‚úÖ [clearAppliedCoupon] Coupon cleared');
    } catch (e) {
      console.error('‚ùå [clearAppliedCoupon] Error:', e);
    }
  }

  // Apply coupon from sidebar input
  async function applyCouponFromInput() {
    const couponInput = document.getElementById('couponCodeInput');
    const applyBtn = document.getElementById('applyCouponBtn');
    const couponMsg = document.getElementById('couponMessage');
    const badge = document.getElementById('couponAppliedBadge');
    const codeDisplay = document.getElementById('appliedCouponCode');
    
    if (!couponInput || !applyBtn) return;
    
    let code = (couponInput.value || '').trim().toUpperCase().replace(/\s+/g, '');
    if (!code) {
      if (couponMsg) {
        couponMsg.textContent = 'Vui l√≤ng nh·∫≠p m√£ gi·∫£m gi√°';
        couponMsg.style.color = '#ef4444';
      }
      return;
    }
    
    // Validate format
    if (code.length < 3 || code.length > 50) {
      if (couponMsg) {
        couponMsg.textContent = 'M√£ gi·∫£m gi√° ph·∫£i c√≥ t·ª´ 3 ƒë·∫øn 50 k√Ω t·ª±';
        couponMsg.style.color = '#ef4444';
      }
      return;
    }
    
    applyBtn.disabled = true;
    applyBtn.textContent = 'ƒêang ki·ªÉm tra...';
    if (couponMsg) {
      couponMsg.textContent = 'ƒêang ki·ªÉm tra m√£...';
      couponMsg.style.color = '#6b7280';
    }
    
    try {
      const url = `${location.origin}/api/coupons/validate?code=${encodeURIComponent(code)}&_=${Date.now()}`;
      const response = await fetch(url, { cache: 'no-store' });
      
      if (!response.ok) {
        let message = 'M√£ gi·∫£m gi√° kh√¥ng h·ª£p l·ªá';
        try {
          const errorData = await response.json();
          message = errorData.message || message;
        } catch (_) {}
        throw new Error(message);
      }
      
      const couponData = await response.json();
      
      // Save to localStorage
      const couponToSave = {
        code: couponData.code || code,
        type: couponData.type,
        value: couponData.value,
        maxDiscount: couponData.maxDiscount,
        description: couponData.description,
        validated: true,
        appliedAt: new Date().toISOString()
      };
      
      try {
        localStorage.setItem('appliedCoupon', JSON.stringify(couponToSave));
      } catch (e) {
        console.warn('‚ö†Ô∏è [applyCouponFromInput] Could not save to localStorage:', e);
      }
      
      // Show success message
      if (couponMsg) {
        const discountText = couponData.type === 'percent' 
          ? `${couponData.value}%` 
          : `${vnd(couponData.value)}`;
        couponMsg.textContent = `‚úÖ M√£ "${code}" ƒë√£ ƒë∆∞·ª£c √°p d·ª•ng th√†nh c√¥ng (Gi·∫£m ${discountText})`;
        couponMsg.style.color = '#10b981';
      }
      
      // Show badge
      if (badge) {
        if (codeDisplay) codeDisplay.textContent = code;
        badge.style.display = 'block';
      }
      
      console.log('‚úÖ [applyCouponFromInput] Coupon applied:', couponToSave);
      
    } catch (error) {
      console.error('‚ùå [applyCouponFromInput] Error:', error);
      if (couponMsg) {
        couponMsg.textContent = error.message || 'M√£ gi·∫£m gi√° kh√¥ng h·ª£p l·ªá';
        couponMsg.style.color = '#ef4444';
      }
      if (badge) badge.style.display = 'none';
    } finally {
      applyBtn.disabled = false;
      applyBtn.textContent = '√Åp d·ª•ng';
    }
  }

  // Initialize coupon functionality
  document.addEventListener('DOMContentLoaded', function() {
    // Load coupons.js if not already loaded
    if (!window.coupons) {
      const script = document.createElement('script');
      script.src = 'js/coupons.js';
      document.head.appendChild(script);
    }
    
    // Setup apply button
    const applyBtn = document.getElementById('applyCouponBtn');
    const couponInput = document.getElementById('couponCodeInput');
    
    if (applyBtn) {
      applyBtn.addEventListener('click', applyCouponFromInput);
    }
    
    if (couponInput) {
      // Auto uppercase on input
      couponInput.addEventListener('input', function(e) {
        e.target.value = e.target.value.toUpperCase().replace(/\s+/g, '');
      });
      
      // Apply on Enter key
      couponInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          e.preventDefault();
          applyCouponFromInput();
        }
      });
    }
    
    // Check if there's already an applied coupon
    try {
      const saved = localStorage.getItem('appliedCoupon');
      if (saved) {
        const coupon = JSON.parse(saved);
        if (coupon && coupon.code) {
          const badge = document.getElementById('couponAppliedBadge');
          const codeDisplay = document.getElementById('appliedCouponCode');
          if (badge && codeDisplay) {
            codeDisplay.textContent = coupon.code;
            badge.style.display = 'block';
          }
          if (couponInput) {
            couponInput.value = coupon.code;
          }
        }
      }
    } catch (e) {
      console.warn('‚ö†Ô∏è Could not load saved coupon:', e);
    }
  });
  
  // FAQ Toggle functionality
  document.addEventListener('DOMContentLoaded', function() {
    const faqItems = document.querySelectorAll('.faq-item');
    
    faqItems.forEach(function(item) {
      const question = item.querySelector('.faq-question');
      if (question) {
        question.addEventListener('click', function() {
          // Close other items
          faqItems.forEach(function(otherItem) {
            if (otherItem !== item) {
              otherItem.classList.remove('active');
            }
          });
          // Toggle current item
          item.classList.toggle('active');
        });
      }
    });
  });
</script>
    
  </body>
</html>

