# ğŸ“– HÆ¯á»šNG DáºªN Sá»¬ Dá»¤NG MODULE QUáº¢N LÃ HÃ“A ÄÆ N

## ğŸ¯ Tá»”NG QUAN

Module Quáº£n lÃ½ HÃ³a Ä‘Æ¡n cho phÃ©p báº¡n:
- Xem danh sÃ¡ch táº¥t cáº£ hÃ³a Ä‘Æ¡n
- Thá»‘ng kÃª hÃ³a Ä‘Æ¡n (tá»•ng, Ä‘Ã£ thanh toÃ¡n, chÆ°a thanh toÃ¡n, doanh thu)
- Xem chi tiáº¿t hÃ³a Ä‘Æ¡n
- Thanh toÃ¡n hÃ³a Ä‘Æ¡n
- Há»§y hÃ³a Ä‘Æ¡n (náº¿u chÆ°a thanh toÃ¡n)
- Xuáº¥t PDF danh sÃ¡ch hÃ³a Ä‘Æ¡n vÃ  chi tiáº¿t hÃ³a Ä‘Æ¡n

---

## ğŸš€ TRUY Cáº¬P MODULE

### CÃ¡ch 1: Tá»« Menu
1. ÄÄƒng nháº­p vÃ o há»‡ thá»‘ng
2. Click menu bÃªn trÃ¡i â†’ **HÃ³a Ä‘Æ¡n** (icon ğŸ“‹)
3. Hoáº·c truy cáº­p trá»±c tiáº¿p: `http://localhost:5130/admin/html/invoices.html`

### CÃ¡ch 2: Tá»« Dashboard
1. VÃ o **Dashboard**
2. Click vÃ o tháº» "HÃ³a Ä‘Æ¡n" hoáº·c link "Xem chi tiáº¿t"

---

## ğŸ“Š THá»NG KÃŠ

Trang hÃ³a Ä‘Æ¡n hiá»ƒn thá»‹ 4 tháº» thá»‘ng kÃª á»Ÿ Ä‘áº§u:

1. **Tá»•ng hÃ³a Ä‘Æ¡n** - Tá»•ng sá»‘ hÃ³a Ä‘Æ¡n hiá»‡n cÃ³
2. **ÄÃ£ thanh toÃ¡n** - Sá»‘ hÃ³a Ä‘Æ¡n Ä‘Ã£ thanh toÃ¡n hoÃ n toÃ n
3. **ChÆ°a thanh toÃ¡n** - Sá»‘ hÃ³a Ä‘Æ¡n chÆ°a thanh toÃ¡n hoáº·c cÃ²n ná»£
4. **Tá»•ng doanh thu** - Tá»•ng doanh thu tá»« cÃ¡c hÃ³a Ä‘Æ¡n

> ğŸ’¡ CÃ¡c thá»‘ng kÃª tá»± Ä‘á»™ng cáº­p nháº­t khi báº¡n thÃªm, sá»­a, xÃ³a, hoáº·c thanh toÃ¡n hÃ³a Ä‘Æ¡n

---

## ğŸ” Lá»ŒC & TÃŒM KIáº¾M

### TÃ¬m kiáº¿m
- Nháº­p tá»« khÃ³a vÃ o Ã´ **TÃ¬m kiáº¿m**
- Há»‡ thá»‘ng tÃ¬m kiáº¿m theo:
  - Sá»‘ hÃ³a Ä‘Æ¡n
  - TÃªn khÃ¡ch hÃ ng
- Nháº¥n **Enter** hoáº·c click **Lá»c**

### Lá»c theo Tráº¡ng thÃ¡i
Chá»n tráº¡ng thÃ¡i tá»« dropdown:
- **Táº¥t cáº£** - Hiá»ƒn thá»‹ táº¥t cáº£ hÃ³a Ä‘Æ¡n
- **Issued** - ÄÃ£ phÃ¡t hÃ nh (chÆ°a thanh toÃ¡n)
- **PartiallyPaid** - ÄÃ£ thanh toÃ¡n má»™t pháº§n
- **Paid** - ÄÃ£ thanh toÃ¡n hoÃ n toÃ n
- **Cancelled** - ÄÃ£ há»§y

### Lá»c theo NgÃ y
- **Tá»« ngÃ y**: Chá»n ngÃ y báº¯t Ä‘áº§u
- **Äáº¿n ngÃ y**: Chá»n ngÃ y káº¿t thÃºc
- Click **Lá»c** Ä‘á»ƒ Ã¡p dá»¥ng

> ğŸ’¡ Báº¡n cÃ³ thá»ƒ káº¿t há»£p nhiá»u bá»™ lá»c cÃ¹ng lÃºc

---

## ğŸ“‹ DANH SÃCH HÃ“A ÄÆ N

### Cáº¥u trÃºc cá»™t
1. **Sá»‘ HÄ** - MÃ£ hÃ³a Ä‘Æ¡n duy nháº¥t
2. **NgÃ y phÃ¡t hÃ nh** - NgÃ y táº¡o hÃ³a Ä‘Æ¡n
3. **KhÃ¡ch hÃ ng** - TÃªn khÃ¡ch hÃ ng
4. **Tá»•ng tiá»n** - Tá»•ng giÃ¡ trá»‹ hÃ³a Ä‘Æ¡n
5. **ÄÃ£ tráº£** - Sá»‘ tiá»n Ä‘Ã£ thanh toÃ¡n
6. **CÃ²n láº¡i** - Sá»‘ tiá»n cÃ²n ná»£
7. **Tráº¡ng thÃ¡i** - Badge mÃ u theo tráº¡ng thÃ¡i
8. **Thao tÃ¡c** - CÃ¡c nÃºt hÃ nh Ä‘á»™ng

### Thao tÃ¡c trong danh sÃ¡ch
- **ğŸ” Xem chi tiáº¿t** - Má»Ÿ modal xem chi tiáº¿t
- **ğŸ’³ Thanh toÃ¡n** - Thanh toÃ¡n hÃ³a Ä‘Æ¡n (chá»‰ hiá»‡n khi cÃ²n ná»£)
- **âŒ Há»§y** - Há»§y hÃ³a Ä‘Æ¡n (chá»‰ hiá»‡n khi chÆ°a thanh toÃ¡n)

> ğŸ’¡ DataTable há»— trá»£ search, sort, pagination

---

## ğŸ‘ï¸ XEM CHI TIáº¾T HÃ“A ÄÆ N

### CÃ¡ch má»Ÿ
- Click **Xem chi tiáº¿t** trÃªn má»™t hÃ³a Ä‘Æ¡n trong danh sÃ¡ch

### ThÃ´ng tin hiá»ƒn thá»‹
Modal hiá»ƒn thá»‹:
- **Sá»‘ hÃ³a Ä‘Æ¡n**
- **NgÃ y phÃ¡t hÃ nh**
- **KhÃ¡ch hÃ ng** (tÃªn, email, SÄT)
- **Booking ID**
- **Chi tiáº¿t thanh toÃ¡n**:
  - Tá»•ng tiá»n
  - Thuáº¿
  - Giáº£m giÃ¡
  - ThÃ nh tiá»n
  - ÄÃ£ thanh toÃ¡n
  - CÃ²n láº¡i
- **Tráº¡ng thÃ¡i** - Badge mÃ u
- **NgÃ y thanh toÃ¡n** (náº¿u cÃ³)
- **PhÆ°Æ¡ng thá»©c thanh toÃ¡n** (náº¿u cÃ³)
- **Sá»‘ tham chiáº¿u** (náº¿u cÃ³)

### Xuáº¥t PDF tá»« modal
- Click **Xuáº¥t PDF** á»Ÿ footer modal
- File PDF Ä‘Æ°á»£c táº£i vá» tÃªn `hoa-don-{SO-HOA-DON}.pdf`

---

## ğŸ’³ THANH TOÃN HÃ“A ÄÆ N

### Äiá»u kiá»‡n
- HÃ³a Ä‘Æ¡n cÃ²n ná»£ (status: Issued hoáº·c PartiallyPaid)
- NÃºt **Thanh toÃ¡n** chá»‰ hiá»‡n khi Ä‘iá»u kiá»‡n Ä‘á»§

### CÃ¡c bÆ°á»›c
1. Click **Thanh toÃ¡n** trÃªn hÃ³a Ä‘Æ¡n
2. Modal má»Ÿ vá»›i:
   - Sá»‘ hÃ³a Ä‘Æ¡n
   - Sá»‘ tiá»n cÃ²n láº¡i
3. Äiá»n form:
   - **Sá»‘ tiá»n**: Nháº­p sá»‘ tiá»n thanh toÃ¡n (máº·c Ä‘á»‹nh = cÃ²n láº¡i)
   - **PhÆ°Æ¡ng thá»©c**: Chá»n 1 trong 5:
     - Tiá»n máº·t (Cash)
     - Tháº» tÃ­n dá»¥ng (CreditCard)
     - Chuyá»ƒn khoáº£n (BankTransfer)
     - MoMo
     - ZaloPay
   - **Sá»‘ tham chiáº¿u**: (Optional) Nháº­p sá»‘ tham chiáº¿u
4. Click **XÃ¡c nháº­n thanh toÃ¡n**
5. Há»‡ thá»‘ng:
   - Cáº­p nháº­t sá»‘ tiá»n Ä‘Ã£ tráº£
   - Cáº­p nháº­t tráº¡ng thÃ¡i (Issued â†’ PartiallyPaid â†’ Paid)
   - Ghi nháº­n phÆ°Æ¡ng thá»©c thanh toÃ¡n
   - Táº¡o audit log

### Tráº¡ng thÃ¡i sau thanh toÃ¡n
- **Issued**: ChÆ°a thanh toÃ¡n â†’ **PartiallyPaid** náº¿u tráº£ má»™t pháº§n, **Paid** náº¿u tráº£ Ä‘á»§
- **PartiallyPaid**: ÄÃ£ tráº£ má»™t pháº§n â†’ **Paid** khi tráº£ Ä‘á»§, **PartiallyPaid** náº¿u cÃ²n ná»£

---

## âŒ Há»¦Y HÃ“A ÄÆ N

### Äiá»u kiá»‡n
- ChÆ°a thanh toÃ¡n hoÃ n toÃ n
- Chá»‰ ngÆ°á»i cÃ³ quyá»n má»›i há»§y Ä‘Æ°á»£c

### CÃ¡c bÆ°á»›c
1. Click **Há»§y** trÃªn hÃ³a Ä‘Æ¡n
2. XÃ¡c nháº­n trong dialog
3. Há»‡ thá»‘ng:
   - Chuyá»ƒn tráº¡ng thÃ¡i thÃ nh **Cancelled**
   - Táº¡o audit log
   - KhÃ´ng thá»ƒ thanh toÃ¡n sau khi há»§y

> âš ï¸ **LÆ°u Ã½**: KhÃ´ng thá»ƒ há»§y hÃ³a Ä‘Æ¡n Ä‘Ã£ thanh toÃ¡n hoÃ n toÃ n

---

## ğŸ“„ XUáº¤T PDF

### Xuáº¥t bÃ¡o cÃ¡o danh sÃ¡ch
- Click nÃºt **Xuáº¥t bÃ¡o cÃ¡o** á»Ÿ header trang
- File `bao-cao-hoa-don.pdf` Ä‘Æ°á»£c táº£i vá»
- Bao gá»“m táº¥t cáº£ hÃ³a Ä‘Æ¡n Ä‘ang hiá»ƒn thá»‹

### Xuáº¥t chi tiáº¿t má»™t hÃ³a Ä‘Æ¡n
1. Má»Ÿ chi tiáº¿t hÃ³a Ä‘Æ¡n (Xem chi tiáº¿t)
2. Click **Xuáº¥t PDF** trong modal
3. File `hoa-don-{SO-HOA-DON}.pdf` Ä‘Æ°á»£c táº£i vá»

### Ná»™i dung PDF
**BÃ¡o cÃ¡o danh sÃ¡ch**:
- TiÃªu Ä‘á» "BÃO CÃO HÃ“A ÄÆ N"
- Danh sÃ¡ch táº¥t cáº£ hÃ³a Ä‘Æ¡n:
  - Sá»‘ HÄ
  - KhÃ¡ch hÃ ng
  - NgÃ y
  - Tá»•ng tiá»n
  - Tráº¡ng thÃ¡i

**Chi tiáº¿t hÃ³a Ä‘Æ¡n**:
- TiÃªu Ä‘á» "HÃ“A ÄÆ N"
- Sá»‘ HÄ
- NgÃ y
- KhÃ¡ch hÃ ng
- Chi tiáº¿t:
  - Tá»•ng tiá»n
  - Thuáº¿
  - Giáº£m giÃ¡
  - Tá»•ng cá»™ng
  - ÄÃ£ thanh toÃ¡n
  - CÃ²n láº¡i

---

## ğŸ” PHÃ‚N QUYá»€N

### Ai cÃ³ quyá»n truy cáº­p?
- **Admin**: ToÃ n quyá»n
- **Manager**: ToÃ n quyá»n
- **Accounting**: ToÃ n quyá»n
- **Cashier**: CÃ³ thá»ƒ xem vÃ  thanh toÃ¡n hÃ³a Ä‘Æ¡n
- **FrontDesk**: Chá»‰ xem

### HÃ nh Ä‘á»™ng theo quyá»n
| HÃ nh Ä‘á»™ng | Admin | Manager | Accounting | Cashier | FrontDesk |
|-----------|-------|---------|------------|---------|-----------|
| Xem danh sÃ¡ch | âœ… | âœ… | âœ… | âœ… | âœ… |
| Xem chi tiáº¿t | âœ… | âœ… | âœ… | âœ… | âœ… |
| Thanh toÃ¡n | âœ… | âœ… | âœ… | âœ… | âŒ |
| Há»§y hÃ³a Ä‘Æ¡n | âœ… | âœ… | âœ… | âŒ | âŒ |
| Xuáº¥t PDF | âœ… | âœ… | âœ… | âœ… | âœ… |

---

## ğŸ”§ Xá»¬ LÃ Lá»–I THÆ¯á»œNG Gáº¶P

### 1. KhÃ´ng hiá»ƒn thá»‹ danh sÃ¡ch hÃ³a Ä‘Æ¡n
**NguyÃªn nhÃ¢n**:
- ChÆ°a Ä‘Äƒng nháº­p
- Token háº¿t háº¡n
- API lá»—i

**Giáº£i phÃ¡p**:
1. Refresh trang (F5)
2. ÄÄƒng xuáº¥t vÃ  Ä‘Äƒng nháº­p láº¡i
3. Kiá»ƒm tra Console Ä‘á»ƒ xem lá»—i API

### 2. KhÃ´ng thá»ƒ thanh toÃ¡n
**NguyÃªn nhÃ¢n**:
- HÃ³a Ä‘Æ¡n Ä‘Ã£ thanh toÃ¡n hoÃ n toÃ n
- KhÃ´ng cÃ³ quyá»n thanh toÃ¡n
- Sá»‘ tiá»n nháº­p lá»›n hÆ¡n sá»‘ cÃ²n láº¡i

**Giáº£i phÃ¡p**:
- Xem láº¡i sá»‘ tiá»n cÃ²n láº¡i
- LiÃªn há»‡ admin Ä‘á»ƒ Ä‘Æ°á»£c phÃ¢n quyá»n

### 3. KhÃ´ng xuáº¥t Ä‘Æ°á»£c PDF
**NguyÃªn nhÃ¢n**:
- Browser khÃ´ng há»— trá»£
- Cháº·n popup/download
- Lá»—i jsPDF

**Giáº£i phÃ¡p**:
1. Cho phÃ©p download trong browser
2. Thá»­ láº¡i vá»›i Chrome hoáº·c Edge
3. Check Console xem cÃ³ lá»—i khÃ´ng

### 4. DataTable khÃ´ng load
**NguyÃªn nhÃ¢n**:
- Network lag
- API lá»—i

**Giáº£i phÃ¡p**:
1. Refresh trang
2. Check API response
3. Clear cache vÃ  reload

---

## ğŸ’¡ CÃC TÃNH NÄ‚NG NÃ‚NG CAO

### 1. Export Excel (sáº½ thÃªm)
- Xuáº¥t danh sÃ¡ch hÃ³a Ä‘Æ¡n ra Excel
- Há»— trá»£ filter vÃ  sorting

### 2. In hÃ³a Ä‘Æ¡n trá»±c tiáº¿p
- In tá»« mÃ¡y in
- Há»— trá»£ mÃ¡y in nhiá»‡t, mÃ¡y in thÆ°á»ng

### 3. Email hÃ³a Ä‘Æ¡n
- Gá»­i hÃ³a Ä‘Æ¡n qua email cho khÃ¡ch hÃ ng
- Tá»± Ä‘á»™ng khi thanh toÃ¡n hoÃ n táº¥t

### 4. Biá»ƒu Ä‘á»“ thá»‘ng kÃª
- Biá»ƒu Ä‘á»“ doanh thu theo ngÃ y/tuáº§n/thÃ¡ng
- Biá»ƒu Ä‘á»“ tá»· lá»‡ thanh toÃ¡n
- Xu hÆ°á»›ng thanh toÃ¡n

---

## ğŸ“ Há»– TRá»¢

Náº¿u gáº·p váº¥n Ä‘á»:
1. Xem log trong Console (F12)
2. Kiá»ƒm tra API response
3. LiÃªn há»‡ Admin

**ChÃºc báº¡n sá»­ dá»¥ng hiá»‡u quáº£! ğŸ‰**

